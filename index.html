<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Amy's Workout</title>
<meta name="apple-mobile-web-app-capable" content="yes">
<script src="https://cdn.tailwindcss.com"></script>
<script type="module">
import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
import { getAuth, signInAnonymously, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
import { getDatabase, ref, set, get } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';

const firebaseConfig = {
  apiKey: "AIzaSyDu-ypnZu4ojzJAR8N1wpWkvhXqmxyNyUY",
  authDomain: "amy-workout-app.firebaseapp.com",
  databaseURL: "https://amy-workout-app-default-rtdb.firebaseio.com",
  projectId: "amy-workout-app",
  storageBucket: "amy-workout-app.firebasestorage.app",
  messagingSenderId: "127656923512",
  appId: "1:127656923512:web:e3143e94bef691d930788d"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getDatabase(app);
let uid = null;

signInAnonymously(auth);
onAuthStateChanged(auth, async (u) => {
  if (u) {
    uid = u.uid;
    try {
      const snap = await get(ref(db, 'users/' + uid));
      if (snap.exists()) window.loadAppData(snap.val());
    } catch(e){}
  }
});

window.saveAppData = async (data) => {
  if (uid) {
    try { await set(ref(db, 'users/' + uid), data); } catch(e){}
  }
};
</script>
</head>
<body class="bg-gradient-to-br from-pink-100 to-purple-100 min-h-screen">
<div id="app"></div>
<script>
const PRG = {
1:{n:"Foundation",d:{
1:{n:"Upper Push",ex:[
{n:"Incline Barbell/DB Press",s:3,r:"8-12",a:"Smith Machine, Incline DB, Machine Press"},
{n:"Barbell/DB Shoulder Press",s:3,r:"10-12",a:"Smith Machine, DB Press, Machine Press"},
{n:"Assisted Dips/Bench Dips",s:3,r:"5-8",a:"Machine Dips, Band-Assisted, Push-ups"},
{n:"DB Lateral Raises",s:3,r:"12-15",a:"Cable Laterals, Machine Laterals"},
{n:"Tricep Pushdowns",s:3,r:"10-12",a:"Overhead Extensions, Close-Grip Press"},
{n:"Push-ups",s:3,r:"max",a:"Knee Push-ups, Incline Push-ups"}
]},
2:{n:"Lower Body & Core",ex:[
{n:"Barbell Squats",s:3,r:"10-12",a:"Smith Machine, Goblet Squats, Leg Press"},
{n:"Barbell RDLs",s:3,r:"10-12",a:"DB RDLs, Machine RDLs, Stiff-Leg DL"},
{n:"Barbell/DB Lunges",s:3,r:"8-10",a:"Smith Lunges, Walking Lunges, Split Squats"},
{n:"Plank",s:3,r:"30-45s",a:"Knee Plank, RKC Plank"},
{n:"Dead Bug",s:3,r:"10",a:"Leg Lowers, Lying Leg Raises"},
{n:"Bicycle Crunches",s:3,r:"15-20",a:"Regular Crunches, Cable Crunches"}
]},
3:{n:"Cardio & Recovery",t:"c"},
4:{n:"Upper Body Pull",ex:[
{n:"Barbell Rows",s:4,r:"10-12",a:"DB Rows, Smith Rows, Cable Rows, Machine Rows"},
{n:"Negative Pull-ups",s:3,r:"3-5",a:"Assisted Pull-ups, Band Pull-ups, Lat Pulldowns"},
{n:"Lat Pulldowns",s:3,r:"8-10",a:"Wide Grip, Close Grip, Neutral Grip"},
{n:"Barbell/DB Curls",s:3,r:"10-12",a:"EZ-Bar Curls, Cable Curls, Machine Curls"},
{n:"Cable Face Pulls",s:3,r:"15",a:"Band Pulls, DB Reverse Flyes"},
{n:"Hammer Curls",s:3,r:"10-12",a:"Cable Rope Curls, Cross-Body Curls"}
]},
5:{n:"Cardio",t:"c"},
6:{n:"REST",t:"r"},
7:{n:"REST",t:"r"}
}},
2:{n:"Strength & Hypertrophy",d:{
1:{n:"Push",ex:[
{n:"Barbell Bench Press",s:4,r:"6-10",a:"DB Bench, Smith Machine, Machine Press"},
{n:"Barbell/DB Shoulder Press",s:4,r:"8-10",a:"Smith Press, Machine Press"},
{n:"Incline Barbell/DB Press",s:3,r:"8-12",a:"Smith Incline, Machine Incline"},
{n:"Dips",s:4,r:"6-10",a:"Assisted Dips, Bench Dips, Machine Dips"},
{n:"DB Lateral Raises",s:4,r:"12-15",a:"Cable Laterals, Machine Laterals"},
{n:"Overhead Tricep Extension",s:3,r:"10-12",a:"Close-Grip Bench, Cable Extensions"},
{n:"Push-ups",s:3,r:"max",a:"Decline Push-ups, Weighted Push-ups"}
]},
2:{n:"Pull",ex:[
{n:"Negative Pull-ups",s:4,r:"4-6",a:"Assisted Pull-ups (lighter band)"},
{n:"Barbell Rows",s:4,r:"8-10",a:"DB Rows, Smith, T-Bar, Machine"},
{n:"Single Arm DB Row",s:3,r:"10",a:"Cable Row, Machine Row"},
{n:"DB Pullovers",s:3,r:"10-12",a:"Cable Pullovers, Machine"},
{n:"Barbell Curls",s:4,r:"8-12",a:"EZ-Bar, DB, Cable, Machine"},
{n:"Hammer Curls",s:3,r:"10-12",a:"Cable Rope, Cross-Body"}
]},
3:{n:"Legs & Core",ex:[
{n:"Barbell Back Squats",s:4,r:"8-10",a:"Smith Machine, Goblet Squats, Leg Press"},
{n:"Barbell RDLs",s:4,r:"8-10",a:"DB RDLs, Machine"},
{n:"Bulgarian Split Squats",s:3,r:"10",a:"Lunges, Step-ups, Smith"},
{n:"Hanging Knee Raises",s:4,r:"10-15",a:"Lying Leg Raises, Machine"},
{n:"Russian Twists with DB",s:3,r:"20",a:"Bicycle Crunches, Cable Twists"},
{n:"Plank",s:3,r:"60s",a:"RKC Plank, Side Planks"}
]},
4:{n:"Cardio & Core",t:"c"},
5:{n:"Full Body Power",ex:[
{n:"DB/Barbell Clean & Press",s:4,r:"6-8",a:"Barbell version, Kettlebell"},
{n:"Barbell Front Squats",s:3,r:"8-10",a:"Goblet Squats, Back Squats"},
{n:"Barbell Bench Press",s:3,r:"8-10",a:"DB Bench, Smith"},
{n:"Pull-up Practice",s:4,r:"max",a:"Assisted, Negatives, Full Pull-ups"},
{n:"Dips",s:3,r:"max",a:"Assisted, Bench Dips"},
{n:"Walking Lunges",s:3,r:"12",a:"Barbell Lunges, DB Lunges"}
]},
6:{n:"Steady Cardio",t:"c"},
7:{n:"REST",t:"r"}
}},
3:{n:"Peak Performance",d:{
1:{n:"Heavy Push",ex:[
{n:"Barbell Bench Press",s:5,r:"5-8",a:"Smith Machine, DB Bench"},
{n:"Barbell Military Press",s:4,r:"6-8",a:"DB Press, Smith, Machine"},
{n:"Weighted Dips",s:4,r:"6-10",a:"Bodyweight Dips, Assisted"},
{n:"Incline DB Flyes",s:3,r:"10-12",a:"Cable Flyes, Machine"},
{n:"Close-Grip Barbell Press",s:3,r:"8-10",a:"DB Press, Smith"},
{n:"Cable Tricep Extensions",s:3,r:"12-15",a:"Rope Extensions, Bar Extensions, Machine"}
]},
2:{n:"Heavy Pull - PULL-UP EMPHASIS",ex:[
{n:"Strict Pull-ups",s:5,r:"max (GOAL: 5+)",a:"Weighted Pull-ups if able"},
{n:"Barbell Rows",s:4,r:"6-8",a:"T-Bar Rows, DB Rows, Smith, Machine"},
{n:"Wide Grip Lat Pulldown",s:4,r:"8-10",a:"Close Grip, Neutral Grip"},
{n:"DB Shrugs",s:4,r:"12-15",a:"Barbell Shrugs, Smith, Machine"},
{n:"Barbell/EZ-Bar Curls",s:4,r:"8-10",a:"DB Curls, Cable, Machine"},
{n:"Concentration Curls",s:3,r:"10-12",a:"Cable Curls, Preacher Curls"}
]},
3:{n:"Legs & Abs - SIX-PACK",ex:[
{n:"Barbell Front Squats",s:4,r:"8-10",a:"Goblet, Back Squats, Smith, Leg Press"},
{n:"Barbell RDLs",s:4,r:"8-10",a:"DB RDLs, Stiff-Leg DL, Machine"},
{n:"Walking Lunges",s:4,r:"12",a:"Split Squats, Smith, Machine"},
{n:"Hanging Leg Raises",s:4,r:"12-15",a:"Knee Raises, Lying Leg Raises"},
{n:"Cable Woodchoppers",s:3,r:"12",a:"Med Ball Chops, DB Chops"},
{n:"Weighted Decline Sit-ups",s:4,r:"15-20",a:"Regular Decline, Crunches"},
{n:"Plank with Shoulder Taps",s:3,r:"20",a:"Regular Plank, Side Plank"}
]},
4:{n:"HIIT & Core",t:"c"},
5:{n:"Upper Volume",ex:[
{n:"Push-ups",s:5,r:"max",a:"Weighted, Decline"},
{n:"DB Pullovers",s:4,r:"12-15",a:"Cable, Barbell"},
{n:"DB Shoulder Circuit",s:3,r:"12 each",a:"Front/Side/Rear Raises"},
{n:"Dips",s:4,r:"max",a:"Weighted if able, Assisted"},
{n:"Cable Face Pulls",s:4,r:"15-20",a:"Band, DB Reverse Flyes"},
{n:"Barbell Curl 21s",s:3,r:"21",a:"7 bottom+7 top+7 full"},
{n:"Tricep Rope Pushdowns",s:4,r:"15-20",a:"Bar, Machine"}
]},
6:{n:"Steady Cardio",t:"c"},
7:{n:"Active Recovery",t:"r"}
}}
};

let st={v:'home',p:1,w:1,d:1,data:{},info:{name:'',age:'',sw:'',tw:'',goals:''},photos:{},chart:null};

window.loadAppData=d=>{
  if(d.data)st.data=d.data;
  if(d.info)st.info=d.info;
  if(d.photos)st.photos=d.photos;
  render();
};

const sv=()=>{if(window.saveAppData)window.saveAppData({data:st.data,info:st.info,photos:st.photos});};
const gk=()=>'p'+st.p+'w'+st.w+'d'+st.d;
const gwd=()=>st.data[gk()]||{};

function updInfo(f,v){st.info[f]=v;sv();render();}
function updW(f,v){const k=gk();if(!st.data[k])st.data[k]={};st.data[k][f]=v;sv();render();}
function updEx(i,s,t,v){const k=gk();if(!st.data[k])st.data[k]={};if(!st.data[k].ex)st.data[k].ex={};if(!st.data[k].ex[i])st.data[k].ex[i]={};st.data[k].ex[i]['s'+s+t]=v;sv();render();}
function updMeas(f,v){const k='p'+st.p+'w'+st.w+'m';if(!st.data[k])st.data[k]={};st.data[k][f]=v;sv();render();}

function photo(k,e){
  const f=e.target.files[0];
  if(!f)return;
  const r=new FileReader();
  r.onload=ev=>{st.photos[k]=ev.target.result;sv();render();};
  r.readAsDataURL(f);
}

function getExHistory(exName){
  const hist=[];
  Object.keys(st.data).forEach(k=>{
    const m=k.match(/p(\d)w(\d+)d(\d+)/);
    if(!m||!st.data[k].ex)return;
    const p=parseInt(m[1]),w=parseInt(m[2]),d=parseInt(m[3]);
    const ph=PRG[p];
    if(!ph||!ph.d[d]||!ph.d[d].ex)return;
    ph.d[d].ex.forEach((e,i)=>{
      if(e.n===exName&&st.data[k].ex[i]){
        const ex=st.data[k].ex[i];
        let maxW=0;
        for(let s=1;s<=5;s++){
          const wt=parseFloat(ex['s'+s+'w'])||0;
          if(wt>maxW)maxW=wt;
        }
        if(maxW>0){
          hist.push({
            p:p,
            w:w,
            d:d,
            val:maxW,
            label:'P'+p+'W'+w+'D'+d
          });
        }
      }
    });
  });
  return hist.sort((a,b)=>(a.p*100+a.w*10+a.d)-(b.p*100+b.w*10+b.d));
}

function getWellnessData(field){
  const data=[];
  Object.keys(st.data).forEach(k=>{
    const m=k.match(/p(\d)w(\d+)d(\d+)/);
    if(!m)return;
    const p=parseInt(m[1]),w=parseInt(m[2]),d=parseInt(m[3]);
    const val=st.data[k][field];
    if(val){
      let numVal=parseFloat(val);
      if(field==='mood'){
        const moodVals={excellent:6,good:5,okay:4,tired:3,sore:2,stressed:1};
        numVal=moodVals[val]||0;
      }
      if(!isNaN(numVal)&&numVal>0){
        data.push({
          p:p,
          w:w,
          d:d,
          val:numVal,
          label:'P'+p+'W'+w+'D'+d,
          raw:val
        });
      }
    }
  });
  return data.sort((a,b)=>(a.p*100+a.w*10+a.d)-(b.p*100+b.w*10+b.d));
}

function getMeasurementData(field){
  const data=[];
  for(let p=1;p<=3;p++){
    for(let w=1;w<=8;w++){
      const k='p'+p+'w'+w+'m';
      if(st.data[k]&&st.data[k][field]){
        const val=parseFloat(st.data[k][field]);
        if(!isNaN(val)&&val>0){
          data.push({
            p:p,
            w:w,
            val:val,
            label:'P'+p+'W'+w
          });
        }
      }
    }
  }
  return data;
}

function stats(){
  let tw=0,tl=0,tr=0,wts=[];
  Object.keys(st.data).forEach(k=>{
    const d=st.data[k];
    if(d.wt)wts.push(parseFloat(d.wt));
    if(d.ex){tw++;Object.values(d.ex).forEach(e=>{for(let i=1;i<=5;i++){const w=parseFloat(e['s'+i+'w'])||0,r=parseFloat(e['s'+i+'r'])||0;if(w&&r){tl+=w*r;tr+=r;}}});}
  });
  return{tw,tl,tr,wts};
}

function renderChart(title,data){
  if(!data||!data.length)return'<p class="text-center text-gray-600 py-8">No data yet. Start tracking to see your progress!</p>';
  
  const isEx=title.includes('Progress');
  const isMood=title.includes('Mood');
  const vals=data.map(x=>x.val);
  const max=Math.max(...vals);
  const min=Math.min(...vals);
  const rng=max-min||1;
  const avg=(vals.reduce((a,b)=>a+b,0)/vals.length).toFixed(1);
  
  let maxSoFar=0;
  const enriched=data.map(d=>{
    const isPR=isEx&&d.val>maxSoFar;
    if(d.val>maxSoFar)maxSoFar=d.val;
    return{...d,isPR};
  });
  
  const w=Math.max(60,700/enriched.length);
  const chartWidth=Math.max(800,enriched.length*w+100);
  
  return`${isEx?`<div class="grid grid-cols-2 gap-3 mb-4">
<div class="bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border-2 border-blue-300 text-center">
<div class="text-xs text-blue-600 font-bold mb-1">BEST (PR)</div>
<div class="text-3xl font-bold text-blue-700">${max.toFixed(1)}<span class="text-lg"> lbs</span></div>
</div>
<div class="bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg border-2 border-purple-300 text-center">
<div class="text-xs text-purple-600 font-bold mb-1">AVERAGE</div>
<div class="text-3xl font-bold text-purple-700">${avg}<span class="text-lg"> lbs</span></div>
</div>
</div>`:''}
<div class="text-center text-sm text-gray-600 mb-3">ğŸ“ˆ Showing ${enriched.length} data points</div>
<div class="relative bg-gradient-to-br from-gray-50 to-white p-4 rounded-lg border-2 border-gray-300 shadow-sm" style="height:320px;overflow-x:auto">
<svg width="${chartWidth}" height="300" style="min-width:100%">
<defs>
<linearGradient id="lineGrad" x1="0%" y1="0%" x2="0%" y2="100%">
<stop offset="0%" style="stop-color:#3b82f6;stop-opacity:0.2"/>
<stop offset="100%" style="stop-color:#3b82f6;stop-opacity:0"/>
</linearGradient>
</defs>
${[0,0.25,0.5,0.75,1].map(r=>`<line x1="50" y1="${260-r*200}" x2="${chartWidth-20}" y2="${260-r*200}" stroke="#e5e7eb" stroke-width="1" stroke-dasharray="4,4"/><text x="30" y="${263-r*200}" font-size="11" fill="#6b7280" text-anchor="end">${(min+rng*r).toFixed(1)}</text>`).join('')}
${enriched.length>1?`<path d="M${enriched.map((d,i)=>`${60+i*w},${260-((d.val-min)/rng)*200}`).join(' L')}" fill="none" stroke="#3b82f6" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M 60 260 L${enriched.map((d,i)=>`${60+i*w},${260-((d.val-min)/rng)*200}`).join(' L')} L${60+(enriched.length-1)*w} 260 Z" fill="url(#lineGrad)"/>`:''}
${enriched.map((d,i)=>{
const x=60+i*w;
const y=260-((d.val-min)/rng)*200;
const col=d.isPR?'#10b981':(isMood?(d.val>=5?'#10b981':d.val>=4?'#22c55e':d.val>=3?'#eab308':'#ef4444'):'#3b82f6');
return`<circle cx="${x}" cy="${y}" r="6" fill="${col}" stroke="white" stroke-width="2.5"/>
${d.isPR?`<circle cx="${x}" cy="${y}" r="10" fill="none" stroke="#10b981" stroke-width="2" opacity="0.4"/>
<text x="${x}" y="${y-18}" font-size="11" font-weight="bold" fill="#10b981" text-anchor="middle">PR!</text>`:`<text x="${x}" y="${y-12}" font-size="10.5" fill="${col}" font-weight="bold" text-anchor="middle">${d.val.toFixed(1)}</text>`}`;
}).join('')}
${enriched.filter((d,i)=>enriched.length<15||i%(Math.ceil(enriched.length/12))===0).map(d=>{
const i=enriched.indexOf(d);
const x=60+i*w;
return`<text x="${x}" y="285" font-size="9" fill="#6b7280" text-anchor="middle">${d.label}</text>`;
}).join('')}
</svg>
</div>
${isMood?`<div class="mt-4 bg-gradient-to-r from-green-50 via-yellow-50 to-red-50 p-4 rounded-lg border-2 border-gray-300">
<div class="text-xs font-bold text-gray-700 mb-3 text-center">ğŸŠâ€â™€ï¸ SWIM TEAM MOOD SCALE</div>
<div class="grid grid-cols-6 gap-2 text-center text-xs">
<div class="p-2 bg-white rounded border border-green-500"><div class="w-5 h-5 rounded-full bg-green-500 mx-auto mb-1"></div><strong>6</strong><br>Excellent</div>
<div class="p-2 bg-white rounded border border-green-400"><div class="w-5 h-5 rounded-full bg-green-400 mx-auto mb-1"></div><strong>5</strong><br>Good</div>
<div class="p-2 bg-white rounded border border-yellow-400"><div class="w-5 h-5 rounded-full bg-yellow-400 mx-auto mb-1"></div><strong>4</strong><br>Okay</div>
<div class="p-2 bg-white rounded border border-yellow-500"><div class="w-5 h-5 rounded-full bg-yellow-500 mx-auto mb-1"></div><strong>3</strong><br>Tired</div>
<div class="p-2 bg-white rounded border border-red-400"><div class="w-5 h-5 rounded-full bg-red-400 mx-auto mb-1"></div><strong>2</strong><br>Sore</div>
<div class="p-2 bg-white rounded border border-red-500"><div class="w-5 h-5 rounded-full bg-red-500 mx-auto mb-1"></div><strong>1</strong><br>Stressed</div>
</div>
</div>`:''}
${isEx?`<div class="text-center text-sm text-gray-500 mt-3">ğŸ’ª <span class="text-green-600 font-bold">Green circles</span> = Personal Records!</div>`:''}`; 
}


function renderWellness(wd){
  return`<div class="bg-yellow-50 border-2 border-yellow-400 rounded p-4 mb-4">
<h3 class="font-bold mb-3 flex items-center gap-2"><span class="text-xl">ğŸ“Š</span> Daily Wellness Check</h3>
<div class="grid grid-cols-2 gap-3">
<div>
<label class="block text-sm font-bold mb-1">Sleep (hours):</label>
<input type="number" step="0.5" placeholder="Hours" class="w-full p-2 border-2 rounded" value="${wd.sl||''}" onchange="updW('sl',this.value)"/>
</div>
<div>
<label class="block text-sm font-bold mb-1">Sleep Quality (1-10):</label>
<input type="number" min="1" max="10" placeholder="1-10" class="w-full p-2 border-2 rounded" value="${wd.sq||''}" onchange="updW('sq',this.value)"/>
</div>
<div>
<label class="block text-sm font-bold mb-1">Energy Level (1-10):</label>
<input type="number" min="1" max="10" placeholder="1-10" class="w-full p-2 border-2 rounded" value="${wd.en||''}" onchange="updW('en',this.value)"/>
</div>
<div>
<label class="block text-sm font-bold mb-1">Body Weight (lbs):</label>
<input type="number" step="0.1" placeholder="Weight" class="w-full p-2 border-2 rounded" value="${wd.wt||''}" onchange="updW('wt',this.value)"/>
</div>
<div>
<label class="block text-sm font-bold mb-1">Workout Date:</label>
<input type="date" class="w-full p-2 border-2 rounded" value="${wd.dt||''}" onchange="updW('dt',this.value)"/>
</div>
<div>
<label class="block text-sm font-bold mb-1">Start Time:</label>
<input type="time" class="w-full p-2 border-2 rounded" value="${wd.st||''}" onchange="updW('st',this.value)"/>
</div>
<div>
<label class="block text-sm font-bold mb-1">End Time:</label>
<input type="time" class="w-full p-2 border-2 rounded" value="${wd.et||''}" onchange="updW('et',this.value)"/>
</div>
<div>
<label class="block text-sm font-bold mb-1">General Mood:</label>
<select class="w-full p-2 border-2 rounded" onchange="updW('mood',this.value)">
<option value="">Select...</option>
<option value="excellent"${wd.mood==='excellent'?' selected':''}>6 = Excellent (feeling amazing, ready to crush it)</option>
<option value="good"${wd.mood==='good'?' selected':''}>5 = Good (solid, normal training day)</option>
<option value="okay"${wd.mood==='okay'?' selected':''}>4 = Okay (manageable, nothing special)</option>
<option value="tired"${wd.mood==='tired'?' selected':''}>3 = Tired (low energy, might need recovery)</option>
<option value="sore"${wd.mood==='sore'?' selected':''}>2 = Sore (body needs attention)</option>
<option value="stressed"${wd.mood==='stressed'?' selected':''}>1 = Stressed (mental/physical stress high)</option>
</select>
</div>
</div>
</div>`;
}

function rHome(){
  const s=stats();
  const cw=(st.p-1)*8+st.w;
  const prg=(cw/24)*100;
  return`<div class="p-4 max-w-4xl mx-auto">
<div class="bg-gradient-to-r from-pink-500 to-purple-600 text-white p-6 rounded-lg mb-4">
<h1 class="text-3xl font-bold mb-2">Amy's 24-Week Transformation</h1>
<p class="text-lg">December 2025 â†’ June 2026</p>
<p class="mt-2">Age: 54 | Training: 4:00-5:00 AM</p>
</div>
<div class="bg-white rounded-lg p-4 mb-4 border-2 border-purple-400">
<h2 class="text-xl font-bold mb-3">Progress</h2>
<div class="text-center mb-3">
<div class="text-2xl font-bold text-purple-600">Week ${cw} of 24</div>
<div class="text-sm text-gray-600">Phase ${st.p}: ${PRG[st.p].n}</div>
</div>
<div class="w-full bg-gray-200 rounded-full h-4 mb-2">
<div class="bg-gradient-to-r from-pink-500 to-purple-600 h-4 rounded-full" style="width:${prg}%"></div>
</div>
<div class="text-center text-sm text-gray-600">${Math.round(prg)}% Complete</div>
</div>
<div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-6">
<div class="bg-blue-50 p-4 rounded-lg text-center">
<div class="text-2xl font-bold text-blue-600">${s.tw}</div>
<div class="text-xs text-gray-600">Workouts</div>
</div>
<div class="bg-green-50 p-4 rounded-lg text-center">
<div class="text-2xl font-bold text-green-600">${Math.round(s.tl).toLocaleString()}</div>
<div class="text-xs text-gray-600">Lbs Lifted</div>
</div>
<div class="bg-purple-50 p-4 rounded-lg text-center">
<div class="text-2xl font-bold text-purple-600">${s.tr.toLocaleString()}</div>
<div class="text-xs text-gray-600">Reps</div>
</div>
<div class="bg-pink-50 p-4 rounded-lg text-center">
<div class="text-2xl font-bold text-pink-600">${s.wts.length}</div>
<div class="text-xs text-gray-600">Weigh-ins</div>
</div>
</div>

<div class="bg-green-50 border-2 border-green-500 rounded-lg p-4 mb-4">
<h2 class="text-xl font-bold text-green-700 mb-3">Your Goals:</h2>
<ul class="space-y-2 text-sm">
<li>âœ“ Achieve strict pull-ups (multiple sets)</li>
<li>âœ“ Perform dips with confidence</li>
<li>âœ“ Develop visible six-pack abs with toned obliques</li>
<li>âœ“ Build strong, defined lats and upper body</li>
<li>âœ“ Full body restoration</li>
</ul>
</div>

<div class="bg-red-50 border-2 border-red-400 rounded-lg p-4 mb-6">
<h2 class="text-lg font-bold text-red-700 mb-2">âš ï¸ HOCOM & Tracheobronchomalacia Considerations</h2>
<ul class="space-y-1 text-xs">
<li>â€¢ <strong>Always listen to your body</strong> - You know when to rest</li>
<li>â€¢ <strong>Monitor breathing quality</strong> - Stop immediately if breathing becomes difficult</li>
<li>â€¢ <strong>Heart rate awareness</strong> - If HR won't elevate properly, reduce intensity</li>
<li>â€¢ <strong>Choose cardio that feels best</strong> - Stationary bike often easiest for breathing</li>
<li>â€¢ <strong>Recovery is critical</strong> - These conditions make rest even more important</li>
<li>â€¢ <strong>Avoid Valsalva maneuver</strong> - Don't hold breath during heavy lifts</li>
</ul>
</div>

<div class="bg-blue-50 border-2 border-blue-400 rounded-lg p-4 mb-6">
<h3 class="font-bold text-blue-700 mb-3">ğŸ“Š Tracking & Measurements</h3>
<div class="text-sm space-y-2">
<div><strong>Weekly (Every Sunday):</strong> Body weight, Progress photos (front/side/back), All workout performance</div>
<div><strong>Every 4 Weeks:</strong> Body measurements (chest, waist, arms), Assessment & adjustments</div>
</div>
</div>

<div class="bg-blue-50 border-2 border-blue-400 rounded-lg p-4 mb-6">
<h3 class="font-bold text-blue-700 mb-3">ğŸ“Š Expected Milestones</h3>
<div class="text-sm space-y-1">
<div><strong>Week 4:</strong> Strength increase, movement patterns natural</div>
<div><strong>Week 8:</strong> Solid foundation, feeling stronger</div>
<div><strong>Week 12:</strong> First full pull-up attempt!</div>
<div><strong>Week 16:</strong> Multiple pull-ups possible</div>
<div><strong>Week 20:</strong> Sets of 5+ pull-ups, abs showing</div>
<div><strong>Week 24:</strong> Visible six-pack, strong & ripped!</div>
</div>
</div>

<div class="bg-yellow-50 border-2 border-yellow-400 rounded-lg p-4 mb-6">
<h3 class="font-bold text-yellow-700 mb-3">âš ï¸ Important Reminders</h3>
<ul class="space-y-1 text-xs">
<li>â€¢ Warm up 5-10 minutes before each workout</li>
<li>â€¢ Use Smith machine for safety when training alone</li>
<li>â€¢ Progressive overload: Increase weight or reps each week when possible</li>
<li>â€¢ Sleep 7-9 hours nightly for recovery</li>
<li>â€¢ Drink 80+ oz of water daily</li>
<li>â€¢ Listen to your breathing - it's your guide</li>
<li>â€¢ You and your husband can do most exercises together!</li>
</ul>
</div>

<div class="bg-gradient-to-r from-green-400 to-blue-500 text-white rounded-lg p-6 mb-6 text-center">
<h3 class="text-2xl font-bold mb-3">ğŸŒŸ YOU'VE GOT THIS, AMY! ğŸŒŸ</h3>
<p class="mb-3">By June 2026, you WILL be:</p>
<ul class="text-left max-w-md mx-auto space-y-2">
<li>âœ“ Doing multiple strict pull-ups</li>
<li>âœ“ Banging out sets of dips</li>
<li>âœ“ Showing off a defined six-pack</li>
<li>âœ“ Rocking strong, toned lats and arms</li>
<li>âœ“ Feeling stronger and more confident than ever</li>
</ul>
<p class="text-xl font-bold mt-4">Let's make this happen! ğŸ’ªâ¤ï¸</p>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
<button onclick="chView('exercises')" class="bg-indigo-600 text-white p-4 rounded-lg font-bold hover:bg-indigo-700">ğŸ“– Exercise Guide & Form</button>
<button onclick="chView('overview')" class="bg-teal-600 text-white p-4 rounded-lg font-bold hover:bg-teal-700">ğŸ“… Program Overview</button>
</div>

<div class="grid grid-cols-1 md:grid-cols-3 gap-4">
<button onclick="chView('info')" class="bg-blue-600 text-white p-4 rounded-lg font-bold hover:bg-blue-700">ğŸ“‹ Personal Info</button>
<button onclick="chView('workout')" class="bg-pink-600 text-white p-4 rounded-lg font-bold hover:bg-pink-700">ğŸ’ª Workout</button>
<button onclick="chView('stats')" class="bg-purple-600 text-white p-4 rounded-lg font-bold hover:bg-purple-700">ğŸ“Š Stats</button>
</div>
</div>`;
}

function rInfo(){
  return`<div class="p-4 max-w-4xl mx-auto">
<div class="bg-blue-600 text-white p-4 rounded-lg mb-4 flex justify-between items-center">
<h2 class="text-2xl font-bold">Personal Info</h2>
<button onclick="chView('home')" class="bg-white text-blue-600 px-4 py-2 rounded font-bold">ğŸ </button>
</div>
<div class="bg-white rounded-lg p-6 space-y-4">
<div><label class="block font-bold mb-2">Name:</label>
<input class="w-full p-3 border-2 rounded" value="${st.info.name||''}" onchange="updInfo('name',this.value)"/></div>
<div><label class="block font-bold mb-2">Age:</label>
<input type="number" class="w-full p-3 border-2 rounded" value="${st.info.age||''}" onchange="updInfo('age',this.value)"/></div>
<div><label class="block font-bold mb-2">Start Weight (lbs):</label>
<input type="number" step="0.1" class="w-full p-3 border-2 rounded" value="${st.info.sw||''}" onchange="updInfo('sw',this.value)"/></div>
<div><label class="block font-bold mb-2">Target Weight (lbs):</label>
<input type="number" step="0.1" class="w-full p-3 border-2 rounded" value="${st.info.tw||''}" onchange="updInfo('tw',this.value)"/></div>
<div><label class="block font-bold mb-2">Goals:</label>
<textarea class="w-full p-3 border-2 rounded" rows="4" onchange="updInfo('goals',this.value)">${st.info.goals||''}</textarea></div>
</div>
<div class="bg-green-50 border-4 border-green-500 rounded-lg p-6 mt-6">
<h3 class="text-2xl font-bold text-center mb-4">ğŸ“¸ Starting Photos</h3>
<div class="grid grid-cols-1 md:grid-cols-3 gap-4">
${['Front','Side','Back'].map(v=>{
  const k='start'+v;
  return`<div class="border-2 border-dashed border-green-500 rounded p-4 bg-white text-center">
<label class="font-bold block mb-2">${v}</label>
<input type="file" accept="image/*" class="w-full text-sm mb-2" onchange="photo('${k}',event)"/>
${st.photos[k]?`<img src="${st.photos[k]}" class="max-h-40 mx-auto rounded mt-2"/>`:''}
</div>`;
}).join('')}
</div>
</div>
</div>`;
}

function rStats(){
  if(st.chart){
    let data,title;
    if(st.chart.startsWith('ex:')){
      const exName=st.chart.substring(3);
      data=getExHistory(exName);
      title=exName+' Progress';
    }else if(st.chart.startsWith('w:')){
      const field=st.chart.substring(2);
      data=getWellnessData(field);
      const labels={sl:'Sleep Hours',sq:'Sleep Quality',en:'Energy Level',wt:'Body Weight',mood:'General Mood'};
      title=labels[field]+' Trend';
    }else if(st.chart.startsWith('m:')){
      const field=st.chart.substring(2);
      data=getMeasurementData(field);
      const labels={wt:'Weight',ch:'Chest',wa:'Waist',ar:'Arms'};
      title='Weekly '+labels[field];
    }
    return`<div class="p-4 max-w-4xl mx-auto">
<div class="bg-purple-600 text-white p-4 rounded-lg mb-4 flex justify-between items-center">
<h2 class="text-xl font-bold">${title}</h2>
<button onclick="st.chart=null;render()" class="bg-white text-purple-600 px-4 py-2 rounded font-bold">âœ• Close</button>
</div>
<div class="bg-white rounded-lg p-6">
${renderChart(title,data)}
</div>
<button onclick="st.chart=null;render()" class="w-full bg-gray-600 text-white p-4 rounded-lg font-bold hover:bg-gray-700 mt-4">Back to Stats</button>
</div>`;
  }

  const s=stats();
  const sw=parseFloat(st.info.sw)||0;
  const cw=s.wts.length>0?s.wts[s.wts.length-1]:sw;
  const wc=cw-sw;
  return`<div class="p-4 max-w-4xl mx-auto">
<div class="bg-purple-600 text-white p-4 rounded-lg mb-4 flex justify-between items-center">
<h2 class="text-2xl font-bold">ğŸ“Š Stats & Charts</h2>
<button onclick="chView('home')" class="bg-white text-purple-600 px-4 py-2 rounded font-bold">ğŸ </button>
</div>
<div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
<div class="bg-white rounded-lg p-6 text-center">
<div class="text-3xl font-bold text-blue-600">${s.tw}</div>
<div class="text-sm text-gray-600">Workouts</div>
</div>
<div class="bg-white rounded-lg p-6 text-center">
<div class="text-3xl font-bold text-green-600">${Math.round(s.tl).toLocaleString()}</div>
<div class="text-sm text-gray-600">Lbs Lifted</div>
</div>
<div class="bg-white rounded-lg p-6 text-center">
<div class="text-3xl font-bold text-purple-600">${s.tr.toLocaleString()}</div>
<div class="text-sm text-gray-600">Reps</div>
</div>
<div class="bg-white rounded-lg p-6 text-center">
<div class="text-3xl font-bold ${wc<0?'text-green-600':wc>0?'text-orange-600':'text-gray-600'}">
${wc>0?'+':''}${wc.toFixed(1)}
</div>
<div class="text-sm text-gray-600">Weight Change</div>
</div>
</div>
<div class="bg-white rounded-lg p-6 mb-4">
<h3 class="text-xl font-bold mb-4">ğŸ“ˆ Daily Wellness Trends</h3>
<div class="grid grid-cols-2 md:grid-cols-3 gap-2">
<button onclick="st.chart='w:sl';render()" class="bg-blue-100 p-3 rounded text-sm font-bold hover:bg-blue-200">Sleep Hours</button>
<button onclick="st.chart='w:sq';render()" class="bg-blue-100 p-3 rounded text-sm font-bold hover:bg-blue-200">Sleep Quality</button>
<button onclick="st.chart='w:en';render()" class="bg-blue-100 p-3 rounded text-sm font-bold hover:bg-blue-200">Energy Level</button>
<button onclick="st.chart='w:wt';render()" class="bg-blue-100 p-3 rounded text-sm font-bold hover:bg-blue-200">Daily Weight</button>
<button onclick="st.chart='w:mood';render()" class="bg-blue-100 p-3 rounded text-sm font-bold hover:bg-blue-200">General Mood</button>
</div>
</div>
<div class="bg-white rounded-lg p-6">
<h3 class="text-xl font-bold mb-4">ğŸ“ Weekly Measurements</h3>
<div class="grid grid-cols-2 md:grid-cols-4 gap-2">
<button onclick="st.chart='m:wt';render()" class="bg-green-100 p-3 rounded text-sm font-bold hover:bg-green-200">Weight</button>
<button onclick="st.chart='m:ch';render()" class="bg-green-100 p-3 rounded text-sm font-bold hover:bg-green-200">Chest</button>
<button onclick="st.chart='m:wa';render()" class="bg-green-100 p-3 rounded text-sm font-bold hover:bg-green-200">Waist</button>
<button onclick="st.chart='m:ar';render()" class="bg-green-100 p-3 rounded text-sm font-bold hover:bg-green-200">Arms</button>
</div>
</div>
</div>`;
}

function rWork(){
  const ph=PRG[st.p];
  const dy=ph.d[st.d];
  const wd=gwd();

  if(dy.t==='r'){
    return`<div class="p-4 max-w-4xl mx-auto">
<div class="bg-green-600 text-white p-4 rounded-lg mb-4">
<div class="flex justify-between items-center mb-3">
<h2 class="text-xl font-bold">REST DAY</h2>
<button onclick="chView('home')" class="bg-white text-green-600 px-4 py-2 rounded font-bold">ğŸ </button>
</div>
<div class="grid grid-cols-3 gap-2 text-sm">
<select class="p-2 rounded text-black" onchange="st.p=+this.value;st.w=1;st.d=1;render()">
${[1,2,3].map(i=>`<option value="${i}"${st.p===i?' selected':''}>Phase ${i}</option>`).join('')}
</select>
<select class="p-2 rounded text-black" onchange="st.w=+this.value;st.d=1;render()">
${[1,2,3,4,5,6,7,8].map(i=>`<option value="${i}"${st.w===i?' selected':''}>Week ${i}</option>`).join('')}
</select>
<select class="p-2 rounded text-black" onchange="st.d=+this.value;render()">
${[1,2,3,4,5,6,7].map(i=>`<option value="${i}"${st.d===i?' selected':''}>Day ${i}</option>`).join('')}
</select>
</div>
<div class="text-center mt-2 text-sm">Currently: Phase ${st.p}, Week ${st.w}, Day ${st.d}</div>
</div>
${renderWellness(wd)}
<div class="bg-white rounded-lg p-6 text-center mb-4">
<p class="text-xl mb-4">Recovery Day! ğŸŒŸ</p>
<p>Focus on sleep, hydration, and meal prep.</p>
</div>
${st.d===7?`<div class="bg-purple-50 border-4 border-purple-500 rounded-lg p-6 mb-4">
<h3 class="text-2xl font-bold text-center mb-4">ğŸ“Š Week ${st.w} Measurements</h3>
<div class="grid grid-cols-2 md:grid-cols-4 gap-3">
<div><label class="block font-bold mb-1 text-sm">Weight (lbs):</label>
<input type="number" step="0.1" class="w-full p-2 border-2 rounded" value="${(st.data['p'+st.p+'w'+st.w+'m']||{}).wt||''}" onchange="updMeas('wt',this.value)"/></div>
<div><label class="block font-bold mb-1 text-sm">Chest (in):</label>
<input type="number" step="0.1" class="w-full p-2 border-2 rounded" value="${(st.data['p'+st.p+'w'+st.w+'m']||{}).ch||''}" onchange="updMeas('ch',this.value)"/></div>
<div><label class="block font-bold mb-1 text-sm">Waist (in):</label>
<input type="number" step="0.1" class="w-full p-2 border-2 rounded" value="${(st.data['p'+st.p+'w'+st.w+'m']||{}).wa||''}" onchange="updMeas('wa',this.value)"/></div>
<div><label class="block font-bold mb-1 text-sm">Arms (in):</label>
<input type="number" step="0.1" class="w-full p-2 border-2 rounded" value="${(st.data['p'+st.p+'w'+st.w+'m']||{}).ar||''}" onchange="updMeas('ar',this.value)"/></div>
</div>
</div>
<div class="bg-green-50 border-4 border-green-500 rounded-lg p-6 mb-4">
<h3 class="text-2xl font-bold text-center mb-4">ğŸ“¸ Week ${st.w} Progress Photos</h3>
<div class="grid grid-cols-1 md:grid-cols-3 gap-4">
${['Front','Side','Back'].map(v=>{
  const pk='p'+st.p+'w'+st.w+v;
  return`<div class="border-2 border-dashed border-green-500 rounded p-4 bg-white text-center">
<label class="font-bold block mb-2">${v}</label>
<input type="file" accept="image/*" class="w-full text-sm mb-2" onchange="photo('${pk}',event)"/>
${st.photos[pk]?`<img src="${st.photos[pk]}" class="max-h-32 mx-auto rounded mt-2"/>`:''}
</div>`;
}).join('')}
</div>
</div>`:''}
<div class="flex justify-between">
<button onclick="prev()" class="bg-gray-600 text-white px-6 py-3 rounded-lg font-bold">â† Prev</button>
<button onclick="next()" class="bg-green-600 text-white px-6 py-3 rounded-lg font-bold">Next â†’</button>
</div>
</div>`;
  }

  if(dy.t==='c'){
    return`<div class="p-4 max-w-4xl mx-auto">
<div class="bg-blue-600 text-white p-4 rounded-lg mb-4">
<div class="flex justify-between items-center mb-3">
<h2 class="text-xl font-bold">CARDIO DAY</h2>
<button onclick="chView('home')" class="bg-white text-blue-600 px-4 py-2 rounded font-bold">ğŸ </button>
</div>
<div class="grid grid-cols-3 gap-2 text-sm">
<select class="p-2 rounded text-black" onchange="st.p=+this.value;st.w=1;st.d=1;render()">
${[1,2,3].map(i=>`<option value="${i}"${st.p===i?' selected':''}>Phase ${i}</option>`).join('')}
</select>
<select class="p-2 rounded text-black" onchange="st.w=+this.value;st.d=1;render()">
${[1,2,3,4,5,6,7,8].map(i=>`<option value="${i}"${st.w===i?' selected':''}>Week ${i}</option>`).join('')}
</select>
<select class="p-2 rounded text-black" onchange="st.d=+this.value;render()">
${[1,2,3,4,5,6,7].map(i=>`<option value="${i}"${st.d===i?' selected':''}>Day ${i}</option>`).join('')}
</select>
</div>
<div class="text-center mt-2 text-sm">Currently: Phase ${st.p}, Week ${st.w}, Day ${st.d}</div>
</div>
${renderWellness(wd)}
<div class="bg-white rounded-lg p-4 mb-4">
<p class="mb-4 font-bold">Choose your cardio (choose what feels best for breathing):</p>
<ul class="mb-4 space-y-2 text-sm">
<li>â€¢ Stationary Bike 30-45 min (moderate - often easiest for breathing)</li>
<li>â€¢ Elliptical 30-45 min</li>
<li>â€¢ Treadmill walk 30 min</li>
<li>â€¢ Rowing 20-30 min</li>
</ul>
<input placeholder="Activity" class="w-full p-3 border-2 rounded mb-3" value="${wd.act||''}" onchange="updW('act',this.value)"/>
<input type="number" placeholder="Minutes" class="w-full p-3 border-2 rounded mb-3" value="${wd.min||''}" onchange="updW('min',this.value)"/>
<textarea placeholder="Notes" class="w-full p-3 border-2 rounded" rows="3" onchange="updW('n',this.value)">${wd.n||''}</textarea>
</div>
${st.d===7?`<div class="bg-purple-50 border-4 border-purple-500 rounded-lg p-6 mb-4">
<h3 class="text-2xl font-bold text-center mb-4">ğŸ“Š Week ${st.w} Measurements</h3>
<div class="grid grid-cols-2 md:grid-cols-4 gap-3">
<div><label class="block font-bold mb-1 text-sm">Weight (lbs):</label>
<input type="number" step="0.1" class="w-full p-2 border-2 rounded" value="${(st.data['p'+st.p+'w'+st.w+'m']||{}).wt||''}" onchange="updMeas('wt',this.value)"/></div>
<div><label class="block font-bold mb-1 text-sm">Chest (in):</label>
<input type="number" step="0.1" class="w-full p-2 border-2 rounded" value="${(st.data['p'+st.p+'w'+st.w+'m']||{}).ch||''}" onchange="updMeas('ch',this.value)"/></div>
<div><label class="block font-bold mb-1 text-sm">Waist (in):</label>
<input type="number" step="0.1" class="w-full p-2 border-2 rounded" value="${(st.data['p'+st.p+'w'+st.w+'m']||{}).wa||''}" onchange="updMeas('wa',this.value)"/></div>
<div><label class="block font-bold mb-1 text-sm">Arms (in):</label>
<input type="number" step="0.1" class="w-full p-2 border-2 rounded" value="${(st.data['p'+st.p+'w'+st.w+'m']||{}).ar||''}" onchange="updMeas('ar',this.value)"/></div>
</div>
</div>
<div class="bg-green-50 border-4 border-green-500 rounded-lg p-6 mb-4">
<h3 class="text-2xl font-bold text-center mb-4">ğŸ“¸ Week ${st.w} Progress Photos</h3>
<div class="grid grid-cols-1 md:grid-cols-3 gap-4">
${['Front','Side','Back'].map(v=>{
  const pk='p'+st.p+'w'+st.w+v;
  return`<div class="border-2 border-dashed border-green-500 rounded p-4 bg-white text-center">
<label class="font-bold block mb-2">${v}</label>
<input type="file" accept="image/*" class="w-full text-sm mb-2" onchange="photo('${pk}',event)"/>
${st.photos[pk]?`<img src="${st.photos[pk]}" class="max-h-32 mx-auto rounded mt-2"/>`:''}
</div>`;
}).join('')}
</div>
</div>`:''}
<div class="flex justify-between">
<button onclick="prev()" class="bg-gray-600 text-white px-6 py-3 rounded-lg font-bold">â† Prev</button>
<button onclick="next()" class="bg-blue-600 text-white px-6 py-3 rounded-lg font-bold">Next â†’</button>
</div>
</div>`;
  }

  let h=`<div class="p-4 max-w-4xl mx-auto">
<div class="bg-pink-600 text-white p-4 rounded-lg mb-4">
<div class="flex justify-between items-center mb-3">
<h2 class="text-xl font-bold">${dy.n}</h2>
<button onclick="chView('home')" class="bg-white text-pink-600 px-4 py-2 rounded font-bold">ğŸ </button>
</div>
<div class="grid grid-cols-3 gap-2 text-sm">
<select class="p-2 rounded text-black" onchange="st.p=+this.value;st.w=1;st.d=1;render()">
${[1,2,3].map(i=>`<option value="${i}"${st.p===i?' selected':''}>Phase ${i}</option>`).join('')}
</select>
<select class="p-2 rounded text-black" onchange="st.w=+this.value;st.d=1;render()">
${[1,2,3,4,5,6,7,8].map(i=>`<option value="${i}"${st.w===i?' selected':''}>Week ${i}</option>`).join('')}
</select>
<select class="p-2 rounded text-black" onchange="st.d=+this.value;render()">
${[1,2,3,4,5,6,7].map(i=>`<option value="${i}"${st.d===i?' selected':''}>Day ${i}</option>`).join('')}
</select>
</div>
<div class="text-center mt-2 text-sm">Currently: Phase ${st.p}, Week ${st.w}, Day ${st.d}</div>
</div>
${renderWellness(wd)}
<div class="bg-white rounded-lg p-4 mb-4 overflow-x-auto">
<table class="w-full text-xs">
<thead><tr class="bg-blue-600 text-white">
<th class="p-2 text-left">Exercise</th>`;

  const ms=Math.max(...dy.ex.map(e=>e.s));
  for(let s=1;s<=ms;s++)h+=`<th class="p-2">Set ${s}</th>`;
  h+=`</tr></thead><tbody>`;

  dy.ex.forEach((e,i)=>{
    const ed=(wd.ex&&wd.ex[i])||{};
    h+=`<tr class="border-b">
<td class="p-2">
<div class="font-bold">${e.n}</div>
<div class="text-gray-500">${e.s}x${e.r}</div>
<div class="text-gray-400 text-xs italic">Alt: ${e.a}</div>
<button onclick="viewExChart('${e.n}')" class="text-blue-600 text-xs underline mt-1 hover:text-blue-800">ğŸ“ˆ View Progress</button>
</td>`;
    for(let s=1;s<=e.s;s++){
      h+=`<td class="p-1">
<div class="flex gap-1 justify-center items-center">
<input type="number" placeholder="lbs" class="w-14 p-1 border rounded text-center" value="${ed['s'+s+'w']||''}" onchange="updEx(${i},${s},'w',this.value)"/>
<span class="text-xs">Ã—</span>
<input type="number" placeholder="reps" class="w-14 p-1 border rounded text-center" value="${ed['s'+s+'r']||''}" onchange="updEx(${i},${s},'r',this.value)"/>
</div>
</td>`;
    }
    h+=`</tr>`;
  });

  h+=`</tbody></table></div>
<div class="bg-gray-100 p-4 rounded mb-4">
<label class="block font-bold mb-2">Notes:</label>
<textarea class="w-full p-3 border-2 rounded" rows="3" onchange="updW('n',this.value)">${wd.n||''}</textarea>
</div>`;

  if(st.d===7){
    const pk='p'+st.p+'w'+st.w;
    const mk=pk+'m';
    const ms=st.data[mk]||{};
    h+=`<div class="bg-purple-50 border-4 border-purple-500 rounded-lg p-6 mb-4">
<h3 class="text-2xl font-bold text-center mb-4">ğŸ“Š Week ${st.w} Measurements</h3>
<div class="grid grid-cols-2 md:grid-cols-4 gap-3">
<div><label class="block font-bold mb-1 text-sm">Weight (lbs):</label>
<input type="number" step="0.1" class="w-full p-2 border-2 rounded" value="${ms.wt||''}" onchange="updMeas('wt',this.value)"/></div>
<div><label class="block font-bold mb-1 text-sm">Chest (in):</label>
<input type="number" step="0.1" class="w-full p-2 border-2 rounded" value="${ms.ch||''}" onchange="updMeas('ch',this.value)"/></div>
<div><label class="block font-bold mb-1 text-sm">Waist (in):</label>
<input type="number" step="0.1" class="w-full p-2 border-2 rounded" value="${ms.wa||''}" onchange="updMeas('wa',this.value)"/></div>
<div><label class="block font-bold mb-1 text-sm">Arms (in):</label>
<input type="number" step="0.1" class="w-full p-2 border-2 rounded" value="${ms.ar||''}" onchange="updMeas('ar',this.value)"/></div>
</div>
</div>
<div class="bg-green-50 border-4 border-green-500 rounded-lg p-6 mb-4">
<h3 class="text-2xl font-bold text-center mb-4">ğŸ“¸ Week ${st.w} Progress Photos</h3>
<div class="grid grid-cols-1 md:grid-cols-3 gap-4">
${['Front','Side','Back'].map(v=>{
  const phk=pk+v;
  return`<div class="border-2 border-dashed border-green-500 rounded p-4 bg-white text-center">
<label class="font-bold block mb-2">${v}</label>
<input type="file" accept="image/*" class="w-full text-sm mb-2" onchange="photo('${phk}',event)"/>
${st.photos[phk]?`<img src="${st.photos[phk]}" class="max-h-32 mx-auto rounded mt-2"/>`:''}
</div>`;
}).join('')}
</div>
</div>`;
  }

  h+=`<div class="flex justify-between mt-4">
<button onclick="prev()" class="bg-gray-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-gray-700">â† Prev</button>
<button onclick="next()" class="bg-pink-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-pink-700">Next â†’</button>
</div>
</div>`;

  return h;
}

function chView(v){st.v=v;render();}

function viewExChart(exName){st.chart='ex:'+exName;st.v='stats';render();}
function prev(){
  if(st.d>1)st.d--;
  else if(st.w>1){st.w--;st.d=7;}
  else if(st.p>1){st.p--;st.w=8;st.d=7;}
  render();
}

function next(){
  if(st.d<7)st.d++;
  else if(st.w<8){st.w++;st.d=1;}
  else if(st.p<3){st.p++;st.w=1;st.d=1;}
  render();
}



// ============================================================
// EXERCISE GUIDE & FORM - Complete exercise library
// ============================================================
function rExercises(){
 const exercises = {
    "Incline Barbell/DB Press": {
      category: "Chest - Upper",
      description: "A compound movement targeting the upper chest, front deltoids, and triceps.",
      muscles: { primary: "Upper Pectoralis Major, Anterior Deltoids", secondary: "Triceps Brachii, Serratus Anterior" },
      form: ["Set bench to 30-45 degree incline (not too steep)","Lie back with feet flat on floor, shoulder blades squeezed together","Grip barbell slightly wider than shoulders, or hold DBs at chest level","Lower weight slowly to upper chest (nipple line or higher)","Press up and slightly back toward starting position","Keep elbows at 45-degree angle (not flared out)"],
      breathing: "Inhale as you lower, exhale as you press up",
      tips: "Focus on feeling it in your upper chest. If you feel too much shoulder, lower the incline angle.",
      videoShort: "https://www.youtube.com/embed/SrqOu55lrYU",
      videoLong: "https://www.youtube.com/watch?v=SrqOu55lrYU"
    },
    "Barbell/DB Shoulder Press": {
      category: "Shoulders",
      description: "Primary shoulder builder targeting all three deltoid heads, especially front and middle delts.",
      muscles: { primary: "Anterior & Lateral Deltoids", secondary: "Triceps Brachii, Upper Trapezius, Serratus Anterior" },
      form: ["Seated or standing with core tight, feet shoulder-width","Start with weight at shoulder height, palms forward","Press straight up overhead without leaning back","Keep core engaged to protect lower back","Lower with control back to shoulder level","Don't let elbows drop too far behind your body"],
      breathing: "Exhale on press up, inhale on the way down",
      tips: "Using Smith machine provides extra stability. If standing, engage your core like you're bracing for a punch.",
      videoShort: "https://www.youtube.com/embed/qEwKCR5JCog",
      videoLong: "https://www.youtube.com/watch?v=qEwKCR5JCog"
    },
    "Assisted Dips/Bench Dips": {
      category: "Chest & Triceps - Beginner",
      description: "Regression options to build toward full dips.",
      muscles: { primary: "Triceps Brachii, Lower Chest", secondary: "Anterior Deltoids" },
      form: ["Assisted: Use machine with knee pad for support","Bench dips: Hands on bench behind you, feet extended forward","Lower body by bending elbows to 90 degrees","Press back up to straight arms","Keep shoulders down and back"],
      breathing: "Inhale down, exhale up",
      tips: "Perfect these before attempting full dips. Build to 15+ reps before progressing.",
      videoShort: "https://www.youtube.com/embed/0326dy_-CzM",
      videoLong: "https://www.youtube.com/watch?v=0326dy_-CzM"
    },
    "DB Lateral Raises": {
      category: "Shoulders - Side Delts",
      description: "Isolation exercise for side/middle deltoids, building shoulder width.",
      muscles: { primary: "Lateral (Middle) Deltoids", secondary: "Anterior Deltoids, Supraspinatus" },
      form: ["Stand with DBs at sides, slight bend in elbows","Raise arms out to sides until parallel to ground","Lead with elbows, not hands","Think 'pouring water from pitcher'","Lower with control","Don't shrug shoulders up"],
      breathing: "Exhale raising arms, inhale lowering",
      tips: "Don't go too heavy - this is about control and feeling the side delts burn.",
      videoShort: "https://www.youtube.com/embed/3VcKaXpzqRo",
      videoLong: "https://www.youtube.com/watch?v=3VcKaXpzqRo"
    },
    "Tricep Pushdowns": {
      category: "Triceps",
      description: "Cable exercise isolating triceps.",
      muscles: { primary: "Triceps Brachii (all three heads)", secondary: "Anconeus" },
      form: ["Stand facing cable machine, bar at chest height","Grip bar with hands shoulder-width","Keep elbows pinned at sides","Push bar down until arms straight","Squeeze triceps at bottom","Control return to start, keep elbows still"],
      breathing: "Exhale on push down, inhale on return",
      tips: "Don't let elbows drift forward. All movement is at the elbow joint.",
      videoShort: "https://www.youtube.com/embed/2-LAMcpzODU",
      videoLong: "https://www.youtube.com/watch?v=2-LAMcpzODU"
    },
    "Push-ups": {
      category: "Chest & Triceps",
      description: "Classic bodyweight exercise building chest, shoulders, and triceps.",
      muscles: { primary: "Pectoralis Major, Triceps Brachii", secondary: "Anterior Deltoids, Serratus Anterior, Core" },
      form: ["Hands slightly wider than shoulders, body in straight line","Lower chest to ground (or close), elbows at 45 degrees","Push back up to straight arms","Keep core tight, don't let hips sag","Full range of motion on each rep"],
      breathing: "Inhale lowering, exhale pushing up",
      tips: "Knee push-ups or incline push-ups are great progressions. Build to sets of 20+!",
      videoShort: "https://www.youtube.com/embed/IODxDxX7oi4",
      videoLong: "https://www.youtube.com/watch?v=IODxDxX7oi4"
    },
    "Barbell Squats": {
      category: "Legs - Overall",
      description: "The king of leg exercises, building overall leg mass and strength.",
      muscles: { primary: "Quadriceps, Gluteus Maximus", secondary: "Hamstrings, Erector Spinae, Core" },
      form: ["Bar on upper traps (high bar) or rear delts (low bar)","Feet shoulder-width or slightly wider, toes slightly out","Break at hips and knees simultaneously","Descend until thighs parallel or just below","Keep chest up, core tight, back neutral","Drive through heels to stand"],
      breathing: "Big breath at top, hold during descent, exhale on way up",
      tips: "Smith machine is great for safety. Go deep but maintain form. Your knees can go past toes - that's normal!",
      videoShort: "https://www.youtube.com/embed/ultWZbUMPL8",
      videoLong: "https://www.youtube.com/watch?v=ultWZbUMPL8"
    },
    "Barbell RDLs": {
      category: "Hamstrings & Glutes",
      description: "Romanian Deadlifts - premier hamstring and glute builder.",
      muscles: { primary: "Hamstrings, Gluteus Maximus", secondary: "Erector Spinae, Latissimus Dorsi" },
      form: ["Stand with feet hip-width, slight knee bend","Hold bar at arm's length in front of thighs","Push hips back, bar slides down thighs","Keep back flat, core tight","Feel stretch in hamstrings (mid-shin)","Drive hips forward to stand, squeeze glutes"],
      breathing: "Inhale going down, exhale driving up",
      tips: "NOT a squat! This is a hip hinge. Feel it in your hamstrings and glutes, not lower back.",
      videoShort: "https://www.youtube.com/embed/jEy_czb3RKA",
      videoLong: "https://www.youtube.com/watch?v=jEy_czb3RKA"
    },
    "Barbell/DB Lunges": {
      category: "Legs - Functional",
      description: "Walking or stationary lunges building legs and balance.",
      muscles: { primary: "Quadriceps, Gluteus Maximus", secondary: "Hamstrings, Calves, Core" },
      form: ["Start standing, weight in hands or on back","Step forward into lunge position","Both knees bent to 90 degrees","Back knee hovers just above ground","Push through front heel to return or step through","Keep torso upright throughout"],
      breathing: "Inhale on descent, exhale on rise",
      tips: "Control the descent. Don't let front knee collapse inward.",
      videoShort: "https://www.youtube.com/embed/QOVaHwm-Q6U",
      videoLong: "https://www.youtube.com/watch?v=QOVaHwm-Q6U"
    },
    "Plank": {
      category: "Core - Stability",
      description: "Fundamental core exercise building overall stability and endurance.",
      muscles: { primary: "Rectus Abdominis, Transverse Abdominis", secondary: "Obliques, Erector Spinae, Glutes" },
      form: ["Forearms on ground, elbows under shoulders","Body in straight line from head to heels","Squeeze glutes and core","Don't let hips sag or pike up","Breathe steadily","Hold for prescribed time"],
      breathing: "Steady, controlled breathing throughout hold",
      tips: "Quality over time. Perfect form for 30 seconds beats sloppy form for 60 seconds.",
      videoShort: "https://www.youtube.com/embed/ASdvN_XEl_c",
      videoLong: "https://www.youtube.com/watch?v=ASdvN_XEl_c"
    },
    "Dead Bug": {
      category: "Core - Coordination",
      description: "Core exercise teaching proper bracing and coordination.",
      muscles: { primary: "Transverse Abdominis, Rectus Abdominis", secondary: "Hip Flexors" },
      form: ["Lie on back, arms straight up, knees at 90 degrees","Press lower back into floor","Extend opposite arm and leg (right arm + left leg)","Return to start, switch sides","Keep lower back pressed to floor throughout","10 reps per side = 1 set"],
      breathing: "Exhale as you extend, inhale returning",
      tips: "This looks easy but challenges core stability. Keep that lower back down!",
      videoShort: "https://www.youtube.com/embed/g_BYB0R-4Ws",
      videoLong: "https://www.youtube.com/watch?v=g_BYB0R-4Ws"
    },
    "Bicycle Crunches": {
      category: "Core - Obliques",
      description: "Dynamic core movement targeting entire abdominal region.",
      muscles: { primary: "Rectus Abdominis, Obliques", secondary: "Hip Flexors" },
      form: ["Lie on back, hands behind head (don't pull on neck)","Lift shoulders and feet off ground","Bring right elbow toward left knee while extending right leg","Switch sides in cycling motion","Keep abs engaged throughout","Focus on twisting torso, not pulling head"],
      breathing: "Exhale on each twist",
      tips: "Slow and controlled is better than fast and sloppy. Feel the obliques work.",
      videoShort: "https://www.youtube.com/embed/9FGilxCbdz8",
      videoLong: "https://www.youtube.com/watch?v=9FGilxCbdz8"
    },
    "Barbell Rows": {
      category: "Back - Middle",
      description: "Fundamental back builder targeting lats, rhomboids, and middle back.",
      muscles: { primary: "Latissimus Dorsi, Rhomboids, Middle Trapezius", secondary: "Posterior Deltoids, Biceps, Erector Spinae" },
      form: ["Stand with feet hip-width, knees slightly bent","Hinge forward at hips, back straight, core tight","Let bar hang at arm's length","Pull bar to lower chest/upper abs","Lead with elbows, squeeze shoulder blades together","Lower with control, maintain back position"],
      breathing: "Exhale on pull, inhale on lower",
      tips: "Don't round your back. Think 'pull elbows back' not 'pull hands up'. Smith machine works great here.",
      videoShort: "https://www.youtube.com/embed/FWJR5Ve8bnQ",
      videoLong: "https://www.youtube.com/watch?v=FWJR5Ve8bnQ"
    },
    "Negative Pull-ups": {
      category: "Back - Progression",
      description: "Eccentric training to build toward full pull-ups by focusing on the lowering phase.",
      muscles: { primary: "Latissimus Dorsi", secondary: "Biceps, Rhomboids, Rear Delts" },
      form: ["Jump or step up to top position (chin over bar)","Lower yourself as slowly as possible (aim for 5+ seconds)","Control the descent with your lats, don't just drop","Fully extend arms at bottom","Reset and repeat"],
      breathing: "Slow controlled breath throughout descent",
      tips: "CRITICAL for building pull-up strength. Take 5-10 seconds to lower. When you can do 5x5 seconds, you're close to your first pull-up!",
      videoShort: "https://www.youtube.com/embed/gnwvwubRA0Y",
      videoLong: "https://www.youtube.com/watch?v=gnwvwubRA0Y"
    },
    "Lat Pulldowns": {
      category: "Back - Width",
      description: "Machine exercise mimicking pull-up motion, building lat width.",
      muscles: { primary: "Latissimus Dorsi", secondary: "Biceps Brachii, Rhomboids, Posterior Deltoids" },
      form: ["Sit with thighs secured under pad","Grip bar slightly wider than shoulders","Pull bar to upper chest, driving elbows down and back","Squeeze lats at bottom","Control the weight back up","Don't lean back excessively"],
      breathing: "Exhale on pull down, inhale on return",
      tips: "Great for building pull-up strength. Imagine pulling the bar apart as you pull down.",
      videoShort: "https://www.youtube.com/embed/CAwf7n6Luuc",
      videoLong: "https://www.youtube.com/watch?v=CAwf7n6Luuc"
    },
    "Barbell/DB Curls": {
      category: "Biceps",
      description: "Primary bicep builder for arm mass.",
      muscles: { primary: "Biceps Brachii", secondary: "Brachialis, Brachioradialis" },
      form: ["Stand with feet hip-width, weight at thighs","Keep elbows pinned to sides","Curl weight up, squeeze biceps at top","Lower with control, full extension at bottom","Don't swing or use momentum"],
      breathing: "Exhale on curl, inhale on lower",
      tips: "Control the weight - don't let it control you. Squeeze hard at the top.",
      videoShort: "https://www.youtube.com/embed/ykJmrZ5v0Oo",
      videoLong: "https://www.youtube.com/watch?v=ykJmrZ5v0Oo"
    },
    "Cable Face Pulls": {
      category: "Rear Delts & Upper Back",
      description: "Critical exercise for shoulder health and rear delt development.",
      muscles: { primary: "Posterior Deltoids, Rhomboids", secondary: "Middle Trapezius, Rotator Cuff" },
      form: ["Set cable at face height with rope attachment","Pull rope toward face, hands going past ears","Focus on squeezing rear delts and upper back","Elbows high, pull apart the rope at peak","Control the return, maintain tension"],
      breathing: "Exhale on pull, inhale on return",
      tips: "IMPORTANT for shoulder health and posture. Feel it in rear delts, not arms.",
      videoShort: "https://www.youtube.com/embed/rep-qVOkqgk",
      videoLong: "https://www.youtube.com/watch?v=rep-qVOkqgk"
    },
    "Hammer Curls": {
      category: "Biceps & Forearms",
      description: "Neutral grip curls hitting biceps and brachialis.",
      muscles: { primary: "Brachialis, Biceps Brachii", secondary: "Brachioradialis (forearm)" },
      form: ["Hold DBs at sides, palms facing each other","Curl up keeping palms facing in (hammer grip)","Elbows stay at sides","Squeeze at top, lower with control","Can alternate arms or do both together"],
      breathing: "Exhale on curl, inhale on lower",
      tips: "Great for adding arm thickness and forearm strength.",
      videoShort: "https://www.youtube.com/embed/TwD-YGVP4Bk",
      videoLong: "https://www.youtube.com/watch?v=TwD-YGVP4Bk"
    },
    "Barbell Bench Press": {
      category: "Chest - Overall",
      description: "The king of chest exercises, building overall chest mass, shoulders, and triceps.",
      muscles: { primary: "Pectoralis Major (entire chest)", secondary: "Anterior Deltoids, Triceps Brachii" },
      form: ["Lie flat on bench, eyes under the bar","Feet flat on floor, squeeze shoulder blades together","Grip bar slightly wider than shoulders","Lower bar to mid-chest (nipple line) with control","Touch chest lightly, don't bounce","Press up powerfully, driving through your chest"],
      breathing: "Inhale as bar descends, exhale forcefully as you press up",
      tips: "Smith machine is great for safety when training alone. Focus on feeling chest work, not just moving weight.",
      videoShort: "https://www.youtube.com/embed/rT7DgCr-3pg",
      videoLong: "https://www.youtube.com/watch?v=rT7DgCr-3pg"
    },
    "Dips": {
      category: "Chest & Triceps",
      description: "Bodyweight exercise that builds tremendous chest and tricep strength.",
      muscles: { primary: "Lower Pectoralis Major, Triceps Brachii", secondary: "Anterior Deltoids, Rhomboids" },
      form: ["Grip parallel bars, arms straight, shoulders down","Lean slightly forward for chest emphasis","Lower body by bending elbows until upper arms parallel to ground","Keep elbows at 45-degree angle, not flared wide","Press back up powerfully to starting position","Maintain forward lean throughout"],
      breathing: "Inhale going down, exhale pressing up",
      tips: "Use assisted dip machine or bands if needed. More forward lean = more chest. Upright = more triceps.",
      videoShort: "https://www.youtube.com/embed/2z8JmcrW-As",
      videoLong: "https://www.youtube.com/watch?v=2z8JmcrW-As"
    },
    "Overhead Tricep Extension": {
      category: "Triceps",
      description: "Overhead movement for tricep stretch and growth.",
      muscles: { primary: "Triceps Brachii (especially long head)", secondary: "Core stabilizers" },
      form: ["Stand or sit holding weight overhead","Keep elbows close to head, pointing up","Lower weight behind head by bending elbows","Stretch triceps at bottom","Extend arms back to overhead position","Keep upper arms still - only forearms move"],
      breathing: "Inhale lowering, exhale extending",
      tips: "Great for long head of triceps. Keep elbows in tight.",
      videoShort: "https://www.youtube.com/embed/YbX7Wd8jQ-Q",
      videoLong: "https://www.youtube.com/watch?v=YbX7Wd8jQ-Q"
    },
    "Single Arm DB Row": {
      category: "Back - Unilateral",
      description: "One arm at a time rowing for balanced back development.",
      muscles: { primary: "Latissimus Dorsi, Rhomboids", secondary: "Biceps, Posterior Deltoids, Erector Spinae" },
      form: ["Place knee and hand on bench for support","Other foot on floor, torso parallel to ground","Let DB hang at arm's length","Pull DB to hip, elbow close to body","Squeeze shoulder blade back and down","Lower with control, feel the stretch"],
      breathing: "Exhale on pull, inhale on lower",
      tips: "Great for fixing imbalances. Focus on rowing motion, not bicep curl.",
      videoShort: "https://www.youtube.com/embed/roCP6wCXPqo",
      videoLong: "https://www.youtube.com/watch?v=roCP6wCXPqo"
    },
    "DB Pullovers": {
      category: "Back & Chest",
      description: "Unique movement stretching and working lats and chest simultaneously.",
      muscles: { primary: "Latissimus Dorsi, Serratus Anterior", secondary: "Pectoralis Major, Triceps (long head)" },
      form: ["Lie perpendicular on bench (upper back only), hips low","Hold one DB with both hands overhead","Lower DB behind head with slight elbow bend","Feel stretch in lats and chest","Pull DB back over chest","Keep hips low throughout"],
      breathing: "Inhale as DB goes back, exhale pulling over",
      tips: "Don't go too heavy. Focus on the stretch and contraction in your lats.",
      videoShort: "https://www.youtube.com/embed/-xa-6cQaZKY",
      videoLong: "https://www.youtube.com/watch?v=-xa-6cQaZKY"
    },
    "Barbell Back Squats": {
      category: "Legs - Quad Focus",
      description: "Traditional back squat emphasizing quad development.",
      muscles: { primary: "Quadriceps", secondary: "Gluteus Maximus, Hamstrings, Core" },
      form: ["Same as regular squats","Focus on driving knees forward slightly","Maintain upright torso","Full depth if mobility allows"],
      breathing: "Breath and brace before descending",
      tips: "Don't let knees cave inward. Push them out.",
      videoShort: "https://www.youtube.com/embed/ultWZbUMPL8",
      videoLong: "https://www.youtube.com/watch?v=vmNPOjaGrVE"
    },
    "Bulgarian Split Squats": {
      category: "Legs - Unilateral",
      description: "Single leg squat with rear foot elevated, incredible for leg development.",
      muscles: { primary: "Quadriceps, Gluteus Maximus", secondary: "Hamstrings, Core (for balance)" },
      form: ["Rear foot elevated on bench behind you","Front foot far enough forward for balance","Lower straight down until front thigh parallel","Keep torso upright, front knee tracks over toes","Drive through front heel to stand","All work in front leg"],
      breathing: "Inhale down, exhale up",
      tips: "These are HARD. Start with bodyweight. Great for glute development and fixing imbalances.",
      videoShort: "https://www.youtube.com/embed/2C-uNgKwPLE",
      videoLong: "https://www.youtube.com/watch?v=2C-uNgKwPLE"
    },
    "Hanging Knee Raises": {
      category: "Core - Lower Abs",
      description: "Hanging exercise building lower ab strength.",
      muscles: { primary: "Lower Rectus Abdominis", secondary: "Hip Flexors, Obliques" },
      form: ["Hang from pull-up bar with straight arms","Engage core, don't swing","Bend knees and raise them toward chest","Lift knees as high as possible","Lower with control, no swinging","Keep shoulders engaged (don't hang passively)"],
      breathing: "Exhale raising knees, inhale lowering",
      tips: "If you can't do these yet, do lying leg raises instead. Progress to these!",
      videoShort: "https://www.youtube.com/embed/hdng3Nm1x_E",
      videoLong: "https://www.youtube.com/watch?v=hdng3Nm1x_E"
    },
    "Russian Twists with DB": {
      category: "Core - Obliques",
      description: "Seated rotational movement for oblique development.",
      muscles: { primary: "Obliques (Internal & External)", secondary: "Rectus Abdominis, Hip Flexors" },
      form: ["Sit on floor, lean back slightly, feet elevated","Hold DB at chest with both hands","Rotate torso to tap DB on floor beside hip","Twist to other side and tap","Keep core engaged, control the rotation","20 total touches = 1 set"],
      breathing: "Exhale on each twist",
      tips: "Focus on rotating your torso, not just moving your arms.",
      videoShort: "https://www.youtube.com/embed/wkD8rjkodUI",
      videoLong: "https://www.youtube.com/watch?v=wkD8rjkodUI"
    },
    "DB/Barbell Clean & Press": {
      category: "Full Body Power",
      description: "Olympic-style movement building explosive power and total body strength.",
      muscles: { primary: "Shoulders, Quadriceps, Glutes", secondary: "Upper Back, Core, Triceps, Hamstrings" },
      form: ["Start with weight at floor or hang position","Explosive pull, shrug shoulders high","Drop under weight catching at shoulders","Stand up from catch position","Press weight overhead to complete the movement","Lower with control"],
      breathing: "Big breath before pull, exhale on press",
      tips: "This is technical. Use light weight to learn the movement. Very effective for power!",
      videoShort: "https://www.youtube.com/embed/KwYJTpQ_x5A",
      videoLong: "https://www.youtube.com/watch?v=KwYJTpQ_x5A"
    },
    "Barbell Front Squats": {
      category: "Legs - Quad & Core",
      description: "Squat with bar in front, emphasizing quads and core stability.",
      muscles: { primary: "Quadriceps", secondary: "Core, Upper Back, Gluteus Maximus" },
      form: ["Bar rests on front delts/collarbone, elbows high","Cross arms or clean grip (elbows up!)","Torso stays very upright","Squat deep, elbows stay high","Drive straight up"],
      breathing: "Brace hard before descending",
      tips: "Easier on lower back than back squats. Keep elbows UP - that's key.",
      videoShort: "https://www.youtube.com/embed/uYumuL_G_V0",
      videoLong: "https://www.youtube.com/watch?v=uYumuL_G_V0"
    },
    "Pull-up Practice": {
      category: "Back - Skill Work",
      description: "Dedicated practice session for developing pull-up strength and technique.",
      muscles: { primary: "Latissimus Dorsi", secondary: "Biceps, Upper Back" },
      form: ["Mix of negatives, assisted, and attempts at full pull-ups","Focus on form and lat engagement","Rest fully between attempts","Track progress (can you hold top longer? Control descent better?)"],
      breathing: "Controlled throughout each variation",
      tips: "Every session makes you stronger. Film yourself to check form. Celebrate small wins!",
      videoShort: "https://www.youtube.com/embed/mRznU6pzez0",
      videoLong: "https://www.youtube.com/watch?v=mRznU6pzez0"
    },
    "Walking Lunges": {
      category: "Legs - Dynamic",
      description: "Continuous forward lunges covering distance.",
      muscles: { primary: "Quadriceps, Gluteus Maximus", secondary: "Hamstrings, Calves, Core" },
      form: ["Step forward into lunge","Drive through front leg to step into next lunge","Maintain upright posture throughout","Controlled rhythm, no bouncing"],
      breathing: "Rhythmic breathing with movement",
      tips: "Great for conditioning. Focus on quality over speed.",
      videoShort: "https://www.youtube.com/embed/L8fvypPrzzs",
      videoLong: "https://www.youtube.com/watch?v=L8fvypPrzzs"
    },
    "Weighted Dips": {
      category: "Chest & Triceps - Advanced",
      description: "Dips with added weight for advanced strength building.",
      muscles: { primary: "Lower Pectoralis Major, Triceps Brachii", secondary: "Anterior Deltoids, Core" },
      form: ["Use dip belt with weight plate or hold dumbbell between feet","Same form as regular dips","Controlled descent, powerful press up","Don't add weight until you can do 12+ bodyweight dips cleanly"],
      breathing: "Inhale down, exhale up with power",
      tips: "Start with just 5-10 lbs added. Progress slowly - this exercise can stress shoulders if rushed.",
      videoShort: "https://www.youtube.com/embed/2z8JmcrW-As",
      videoLong: "https://www.youtube.com/watch?v=xUB6G-dm7DQ"
    },
    "Incline DB Flyes": {
      category: "Chest - Upper",
      description: "Isolation movement for upper chest development.",
      muscles: { primary: "Upper Pectoralis Major", secondary: "Anterior Deltoids" },
      form: ["Lie on incline bench with DBs above chest","Slight bend in elbows maintained throughout","Lower DBs out to sides in wide arc","Feel stretch in chest","Squeeze DBs back together using chest","Don't let arms drop too far below shoulders"],
      breathing: "Inhale lowering, exhale squeezing together",
      tips: "Not a press - it's a 'hugging' motion. Feel the chest stretch and squeeze.",
      videoShort: "https://www.youtube.com/embed/WZnoIR1sT-U",
      videoLong: "https://www.youtube.com/watch?v=WZnoIR1sT-U"
    },
    "Close-Grip Barbell Press": {
      category: "Triceps & Chest",
      description: "Bench press variation emphasizing triceps with hands closer together.",
      muscles: { primary: "Triceps Brachii", secondary: "Inner Pectoralis Major, Anterior Deltoids" },
      form: ["Lie on flat bench, grip bar shoulder-width or slightly narrower","Lower bar to lower chest with elbows close to sides","Keep elbows tucked, not flared","Press up focusing on tricep contraction","Don't go too narrow (wrist pain risk)"],
      breathing: "Inhale lowering, exhale pressing",
      tips: "Great for tricep strength. If wrists hurt, widen grip slightly.",
      videoShort: "https://www.youtube.com/embed/nEF0bv2FW94",
      videoLong: "https://www.youtube.com/watch?v=nEF0bv2FW94"
    },
    "Cable Tricep Extensions": {
      category: "Triceps",
      description: "Cable-based tricep isolation for constant tension.",
      muscles: { primary: "Triceps Brachii", secondary: "Forearms" },
      form: ["Various grip options: rope, bar, single handle","Rope allows elbows to separate at bottom for extra squeeze","Same principles as pushdowns","Full range of motion"],
      breathing: "Exhale on extension, inhale on return",
      tips: "Rope attachment lets you pull apart at bottom for extra contraction.",
      videoShort: "https://www.youtube.com/embed/2-LAMcpzODU",
      videoLong: "https://www.youtube.com/watch?v=kiuVA0gs3EI"
    },
    "Strict Pull-ups": {
      category: "Back - Advanced",
      description: "Full pull-ups with perfect form, no momentum or kipping.",
      muscles: { primary: "Latissimus Dorsi, Teres Major", secondary: "Biceps, Middle Trapezius, Rhomboids" },
      form: ["Dead hang start, arms fully extended","Pull smoothly without kicking or swinging","Chest to bar if possible","Pause at top","Lower with complete control to dead hang","Each rep starts from dead hang"],
      breathing: "Exhale on pull, inhale at top and during lower",
      tips: "Quality over quantity. One perfect rep beats three sloppy ones. THIS IS YOUR GOAL!",
      videoShort: "https://www.youtube.com/embed/eGo4IYlbE5g",
      videoLong: "https://www.youtube.com/watch?v=HuJJsTE8_vA"
    },
    "Wide Grip Lat Pulldown": {
      category: "Back - Width Emphasis",
      description: "Lat pulldown with wider grip to target outer lats.",
      muscles: { primary: "Latissimus Dorsi (outer fibers)", secondary: "Teres Major, Rhomboids" },
      form: ["Grip bar 6-8 inches wider than shoulders","Pull to upper chest with elbows wide","Focus on lat stretch at top","Squeeze lats at bottom, pause briefly","Control the return"],
      breathing: "Exhale pulling, inhale releasing",
      tips: "Wider grip = more lat emphasis, less bicep. Don't go so wide you lose range of motion.",
      videoShort: "https://www.youtube.com/embed/CAwf7n6Luuc",
      videoLong: "https://www.youtube.com/watch?v=X5-G2TKXVZc"
    },
    "DB Shrugs": {
      category: "Traps",
      description: "Isolation exercise for building the trapezius muscles.",
      muscles: { primary: "Upper Trapezius", secondary: "Levator Scapulae" },
      form: ["Stand holding DBs at sides, arms straight","Shrug shoulders straight up toward ears","Hold peak contraction for 1 second","Lower slowly, feel the stretch","Don't roll shoulders - straight up and down"],
      breathing: "Exhale on shrug up, inhale on lower",
      tips: "Heavy weight works here. Control it, don't bounce.",
      videoShort: "https://www.youtube.com/embed/cJRVVxmytaM",
      videoLong: "https://www.youtube.com/watch?v=cJRVVxmytaM"
    },
    "Barbell/EZ-Bar Curls": {
      category: "Biceps",
      description: "Bicep curls with EZ-bar to reduce wrist strain.",
      muscles: { primary: "Biceps Brachii", secondary: "Brachialis, Forearms" },
      form: ["Same as barbell curls","EZ-bar angled grip is easier on wrists","Full range of motion","Strict form, no swinging"],
      breathing: "Exhale on curl up, inhale lowering",
      tips: "EZ-bar often more comfortable than straight bar.",
      videoShort: "https://www.youtube.com/embed/kwG2ipFRgfo",
      videoLong: "https://www.youtube.com/watch?v=kwG2ipFRgfo"
    },
    "Concentration Curls": {
      category: "Biceps - Isolation",
      description: "Seated single-arm curl for peak bicep contraction.",
      muscles: { primary: "Biceps Brachii (peak)", secondary: "Brachialis" },
      form: ["Sit on bench, elbow braced against inner thigh","Let DB hang at arm's length","Curl up to shoulder, rotating pinky up slightly","Squeeze bicep hard at top","Lower slowly, full stretch at bottom"],
      breathing: "Exhale on curl, inhale on lower",
      tips: "Slow and controlled. Really focus on the squeeze at the top.",
      videoShort: "https://www.youtube.com/embed/Jvj2wV0zUp0",
      videoLong: "https://www.youtube.com/watch?v=Jvj2wV0zUp0"
    },
    "Hanging Leg Raises": {
      category: "Core - Lower Abs Advanced",
      description: "Advanced hanging ab exercise with straight legs.",
      muscles: { primary: "Lower Rectus Abdominis", secondary: "Hip Flexors, Grip Strength" },
      form: ["Hang from bar, arms straight","Keep legs straight","Raise legs to parallel (or higher)","Lower with control, no swinging","Minimal knee bend throughout"],
      breathing: "Exhale raising, inhale lowering",
      tips: "ADVANCED. Master knee raises first. These are brutal but effective.",
      videoShort: "https://www.youtube.com/embed/Pr1ieGZ5atk",
      videoLong: "https://www.youtube.com/watch?v=Pr1ieGZ5atk"
    },
    "Cable Woodchoppers": {
      category: "Core - Rotational Power",
      description: "Dynamic rotational exercise building oblique strength and power.",
      muscles: { primary: "Obliques", secondary: "Transverse Abdominis, Shoulders" },
      form: ["Set cable high, stand sideways to machine","Pull cable diagonally across body from high to low","Rotate torso and pivot feet","Like chopping wood","Control the return","Do all reps one side, then switch"],
      breathing: "Exhale on chop down, inhale on return",
      tips: "Let the rotation come from your core, not just your arms.",
      videoShort: "https://www.youtube.com/embed/pAplQXk3dkU",
      videoLong: "https://www.youtube.com/watch?v=pAplQXk3dkU"
    },
    "Weighted Decline Sit-ups": {
      category: "Core - Upper Abs",
      description: "Decline sit-ups with added weight for advanced ab development.",
      muscles: { primary: "Rectus Abdominis (upper region)", secondary: "Hip Flexors, Obliques" },
      form: ["Secure feet on decline bench","Hold weight plate at chest","Curl up using abs, not hip flexors","Come up to about 45 degrees (don't sit all the way up)","Lower with control","Keep tension on abs throughout"],
      breathing: "Exhale curling up, inhale lowering",
      tips: "The decline makes it harder. Focus on abs doing the work, not momentum.",
      videoShort: "https://www.youtube.com/embed/iPxni-g4nOk",
      videoLong: "https://www.youtube.com/watch?v=iPxni-g4nOk"
    },
    "Plank with Shoulder Taps": {
      category: "Core - Dynamic Stability",
      description: "Advanced plank variation adding anti-rotation challenge.",
      muscles: { primary: "Rectus Abdominis, Obliques (anti-rotation)", secondary: "Shoulders, Glutes" },
      form: ["Start in high plank (hands on ground, arms straight)","Body in straight line","Tap right hand to left shoulder, return","Tap left hand to right shoulder, return","Keep hips square - minimal rotation","20 total taps = 1 set"],
      breathing: "Steady breathing, brace core on each tap",
      tips: "The goal is NO hip rotation. Move slowly and controlled.",
      videoShort: "https://www.youtube.com/embed/5nUfMIo8bEg",
      videoLong: "https://www.youtube.com/watch?v=5nUfMIo8bEg"
    },
    "DB Shoulder Circuit": {
      category: "Shoulders - All Heads",
      description: "Circuit hitting all three deltoid heads: front, side, and rear raises.",
      muscles: { primary: "All Three Deltoid Heads (Anterior, Lateral, Posterior)", secondary: "Upper Trapezius, Rotator Cuff" },
      form: ["Front Raises: Raise DBs forward to shoulder height","Side Raises: Raise DBs out to sides to shoulder height","Rear Raises: Bent over, raise DBs out to sides","12 reps each movement, minimal rest between","One complete circuit = 1 set"],
      breathing: "Controlled breathing throughout circuit",
      tips: "Use light weight. Focus on form and feeling each delt head work. This will burn!",
      videoShort: "https://www.youtube.com/embed/q5sNYB1Q6aM",
      videoLong: "https://www.youtube.com/watch?v=q5sNYB1Q6aM"
    },
    "Barbell Curl 21s": {
      category: "Biceps - Advanced",
      description: "High-intensity bicep protocol: 7 bottom half + 7 top half + 7 full range.",
      muscles: { primary: "Biceps Brachii (all parts)", secondary: "Brachialis, Forearms" },
      form: ["First 7: Curl from bottom to mid-point only","Next 7: From mid-point to top only","Final 7: Full range of motion curls","No rest between segments","Use lighter weight than normal curls"],
      breathing: "Steady breathing throughout all 21 reps",
      tips: "These BURN! Use about 60% of your normal curl weight. Great finisher.",
      videoShort: "https://www.youtube.com/embed/u12EXMrgvH8",
      videoLong: "https://www.youtube.com/watch?v=u12EXMrgvH8"
    },
    "Tricep Rope Pushdowns": {
      category: "Triceps",
      description: "Cable pushdown with rope for maximum tricep contraction.",
      muscles: { primary: "Triceps Brachii (all heads)", secondary: "Forearms" },
      form: ["Use rope attachment on high cable","Push down and apart at bottom","Pull rope ends apart and back by hips","Maximum tricep squeeze at bottom","Control return to top"],
      breathing: "Exhale pushing down, inhale returning",
      tips: "The 'pull apart' at bottom really hits the triceps. Turn wrists out.",
      videoShort: "https://www.youtube.com/embed/kiuVA0gs3EI",
      videoLong: "https://www.youtube.com/watch?v=kiuVA0gs3EI"
    },
    "Barbell Military Press": {
      category: "Shoulders",
      description: "Standing or seated overhead press emphasizing front and middle deltoids.",
      form: ["Start with bar at upper chest/collarbone","Stand with feet hip-width, core braced","Press bar straight up, slightly back over head","Lock out arms overhead without hyperextending back","Lower with control back to start","Keep core tight throughout - don't arch back"],
      breathing: "Exhale on press, inhale on descent",
      tips: "This is harder than seated press. If your form breaks down, switch to seated version."
    },
    "Pull-ups": {
      category: "Back - Overall",
      description: "The ultimate back and bicep builder, developing width and strength.",
      form: ["Grip bar slightly wider than shoulders, palms away","Hang with arms fully extended","Pull body up by driving elbows down and back","Get chin over bar","Lower with control to full extension","Avoid kipping or swinging"],
      breathing: "Exhale pulling up, inhale lowering",
      tips: "YOUR GOAL EXERCISE! Start with negatives or assisted. Focus on lat engagement, not arm pulling."
    }
  };
  const categories = {};
  Object.keys(exercises).forEach(name => {
    const cat = exercises[name].category;
    if (!categories[cat]) categories[cat] = [];
    categories[cat].push(name);
  });

  let html = `<div class="p-4 max-w-4xl mx-auto">
    <div class="bg-indigo-600 text-white p-4 rounded-lg mb-4 flex justify-between items-center">
      <h2 class="text-2xl font-bold">ğŸ“– Exercise Guide & Form</h2>
      <button onclick="chView('home')" class="bg-white text-indigo-600 px-4 py-2 rounded font-bold">ğŸ </button>
    </div>
    <div class="bg-gradient-to-r from-indigo-500 to-purple-600 text-white p-4 rounded-lg mb-6">
      <h3 class="text-xl font-bold mb-2">Complete Exercise Library</h3>
      <p class="text-sm">Detailed form instructions for every exercise in your program. Master these movements!</p>
    </div>`;

  const catOrder = ['Chest - Upper', 'Chest - Overall', 'Chest & Triceps', 'Shoulders', 'Back - Overall', 'Back - Middle', 'Back - Width', 'Back - Unilateral', 'Traps', 'Rear Delts & Upper Back', 'Biceps', 'Biceps - Isolation', 'Biceps - Advanced', 'Biceps & Forearms', 'Triceps', 'Legs - Overall', 'Legs - Quad Focus', 'Legs - Quad & Core', 'Hamstrings & Glutes', 'Legs - Unilateral', 'Legs - Functional', 'Legs - Dynamic', 'Core - Stability', 'Core - Dynamic Stability', 'Core - Coordination', 'Core - Obliques', 'Core - Lower Abs', 'Core - Lower Abs Advanced', 'Core - Rotational Power', 'Core - Upper Abs', 'Full Body Power', 'Chest & Triceps - Beginner', 'Chest & Triceps - Advanced', 'Back - Progression', 'Back - Advanced', 'Back - Skill Work', 'Back - Width Emphasis'];

  catOrder.forEach(cat => {
    if (!categories[cat]) return;
    html += `<div class="bg-white rounded-lg p-4 mb-4 border-2 border-indigo-300">
      <h3 class="text-lg font-bold text-indigo-700 mb-3">${cat}</h3>`;
    
    categories[cat].forEach(exName => {
      const ex = exercises[exName];
      html += `<div class="mb-6 p-4 bg-gradient-to-br from-gray-50 to-white rounded-lg border-2 border-indigo-200 shadow-sm">
        <h4 class="text-lg font-bold text-gray-900 mb-2">${exName}</h4>
        <p class="text-sm text-gray-700 mb-3 italic">${ex.description}</p>
        
        ${ex.muscles ? `<div class="bg-blue-50 border-l-4 border-blue-500 p-3 mb-3 rounded">
          <p class="font-bold text-sm text-blue-900 mb-1">ğŸ’ª MUSCLES WORKED:</p>
          <p class="text-sm text-gray-800"><strong class="text-blue-700">Primary:</strong> ${ex.muscles.primary}</p>
          <p class="text-sm text-gray-800"><strong class="text-purple-700">Secondary:</strong> ${ex.muscles.secondary}</p>
        </div>` : ''}
        
        <div class="mb-3">
          <p class="font-bold text-sm text-indigo-700 mb-2">ğŸ“‹ PROPER FORM:</p>
          <ol class="list-decimal list-inside space-y-1 text-sm text-gray-700 pl-2">
            ${ex.form.map(step => `<li class="leading-relaxed">${step}</li>`).join('')}
          </ol>
        </div>
        
        <div class="mb-3 bg-green-50 border-l-4 border-green-500 p-2 rounded">
          <p class="font-bold text-sm text-green-700">ğŸ’¨ BREATHING: <span class="font-normal text-gray-800">${ex.breathing}</span></p>
        </div>
        
        <div class="bg-yellow-50 border-l-4 border-yellow-400 p-3 rounded mb-3">
          <p class="font-bold text-sm text-yellow-800">ğŸ’¡ PRO TIP: <span class="font-normal text-gray-800">${ex.tips}</span></p>
        </div>
        
        ${ex.videoShort ? `
        <div class="bg-gradient-to-r from-indigo-50 to-purple-50 border-2 border-indigo-300 rounded-lg p-4 mt-4">
          <p class="font-bold text-sm text-indigo-900 mb-3 flex items-center gap-2">
            <span class="text-lg">ğŸ“º</span> FORM VIDEO (2-3 min demo - click to play)
          </p>
          <div class="relative" style="padding-bottom:56.25%; height:0; overflow:hidden; border-radius:8px; box-shadow:0 4px 6px rgba(0,0,0,0.1)">
            <iframe 
              src="${ex.videoShort}" 
              style="position:absolute; top:0; left:0; width:100%; height:100%"
              frameborder="0" 
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
              allowfullscreen>
            </iframe>
          </div>
          ${ex.videoLong ? `
          <a href="${ex.videoLong}" target="_blank" rel="noopener noreferrer" 
             class="inline-block mt-3 px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded hover:bg-indigo-700 transition-colors">
            ğŸ“š Watch Detailed Tutorial (5-8 min, opens in new tab)
          </a>
          ` : ''}
        </div>
        ` : ''}
      </div>`;
    
    html += `</div>`;
  });

  html += `</div>`;
  return html;
}

// ============================================================
// PROGRAM OVERVIEW - Understanding the big picture
// ============================================================
function rOverview(){
  return `<div class="p-4 max-w-4xl mx-auto">
    <div class="bg-teal-600 text-white p-4 rounded-lg mb-4 flex justify-between items-center">
      <h2 class="text-2xl font-bold">ğŸ“… Program Overview</h2>
      <button onclick="chView('home')" class="bg-white text-teal-600 px-4 py-2 rounded font-bold">ğŸ </button>
    </div>

    <div class="bg-gradient-to-r from-teal-500 to-blue-600 text-white p-6 rounded-lg mb-6">
      <h3 class="text-2xl font-bold mb-3">Your 24-Week Transformation Journey</h3>
      <p class="mb-2">This program is scientifically designed in three 8-week phases to progressively build your strength, muscle, and confidence.</p>
      <p class="text-sm">Each phase builds on the previous one, preparing your body for the next challenge.</p>
    </div>

    <!-- PHASE 1 -->
    <div class="bg-white rounded-lg p-6 mb-6 border-4 border-blue-400">
      <div class="flex items-center gap-3 mb-4">
        <div class="bg-blue-500 text-white rounded-full w-12 h-12 flex items-center justify-center text-xl font-bold">1</div>
        <div>
          <h3 class="text-2xl font-bold text-blue-700">Phase 1: Foundation</h3>
          <p class="text-sm text-gray-600">Weeks 1-8 | Building Your Base</p>
        </div>
      </div>

      <div class="bg-blue-50 p-4 rounded-lg mb-4">
        <h4 class="font-bold text-blue-800 mb-2">ğŸ¯ Primary Goals:</h4>
        <ul class="space-y-1 text-sm">
          <li>âœ“ Learn proper form and technique on all exercises</li>
          <li>âœ“ Build work capacity and conditioning</li>
          <li>âœ“ Develop mind-muscle connection</li>
          <li>âœ“ Establish consistent training habits</li>
          <li>âœ“ Prepare connective tissues (tendons, ligaments) for heavier loads</li>
        </ul>
      </div>

      <div class="space-y-4">
        <div class="border-l-4 border-blue-500 pl-4">
          <h4 class="font-bold text-gray-800">Day 1: Upper Push</h4>
          <p class="text-sm text-gray-700 mb-2"><strong>Focus:</strong> Chest, shoulders, and triceps</p>
          <p class="text-sm text-gray-600"><strong>Why:</strong> Builds pressing strength foundation. Incline work targets upper chest (important for aesthetics). Lateral raises build shoulder width. Moderate volume (3 sets) allows technique mastery.</p>
        </div>

        <div class="border-l-4 border-green-500 pl-4">
          <h4 class="font-bold text-gray-800">Day 2: Lower Body & Core</h4>
          <p class="text-sm text-gray-700 mb-2"><strong>Focus:</strong> Legs and core stability</p>
          <p class="text-sm text-gray-600"><strong>Why:</strong> Squats and RDLs are fundamental movement patterns. Lunges build single-leg stability. Core work establishes the foundation for all lifting - a strong core protects your spine and improves performance in every exercise.</p>
        </div>

        <div class="border-l-4 border-purple-500 pl-4">
          <h4 class="font-bold text-gray-800">Day 3: Cardio & Recovery</h4>
          <p class="text-sm text-gray-700 mb-2"><strong>Focus:</strong> Active recovery and cardiovascular health</p>
          <p class="text-sm text-gray-600"><strong>Why:</strong> Improves heart health, aids recovery by increasing blood flow, and helps maintain a caloric deficit if fat loss is a goal. Choose activities that feel good for your breathing.</p>
        </div>

        <div class="border-l-4 border-red-500 pl-4">
          <h4 class="font-bold text-gray-800">Day 4: Upper Body Pull</h4>
          <p class="text-sm text-gray-700 mb-2"><strong>Focus:</strong> Back, biceps, and rear delts</p>
          <p class="text-sm text-gray-600"><strong>Why:</strong> Critical for pull-up progression! Rows build back thickness, pulldowns and negatives prepare you for full pull-ups. Face pulls protect shoulder health and improve posture. Back work is crucial for balanced development.</p>
        </div>

        <div class="border-l-4 border-purple-500 pl-4">
          <h4 class="font-bold text-gray-800">Day 5: Cardio</h4>
          <p class="text-sm text-gray-700 mb-2"><strong>Focus:</strong> Cardiovascular endurance</p>
          <p class="text-sm text-gray-600"><strong>Why:</strong> Additional cardio for heart health and calorie burn. Helps recovery between heavy training days.</p>
        </div>

        <div class="border-l-4 border-gray-500 pl-4">
          <h4 class="font-bold text-gray-800">Days 6-7: REST</h4>
          <p class="text-sm text-gray-700 mb-2"><strong>Focus:</strong> Complete recovery</p>
          <p class="text-sm text-gray-600"><strong>Why:</strong> Muscles grow during REST, not during workouts. Two full rest days ensure proper recovery, especially important with your medical conditions. Sleep, hydrate, eat well.</p>
        </div>
      </div>

      <div class="bg-yellow-50 border-2 border-yellow-400 p-4 rounded-lg mt-4">
        <p class="font-bold text-yellow-800 mb-2">ğŸ”‘ Phase 1 Success Strategy:</p>
        <p class="text-sm text-gray-700">Focus on FORM over weight. If an exercise doesn't feel right, use the alternatives listed. By Week 8, movements should feel natural and you'll notice increased strength. Your body is adapting at the cellular level - new neural pathways forming, muscle fibers recruiting more efficiently.</p>
      </div>
    </div>

    <!-- PHASE 2 -->
    <div class="bg-white rounded-lg p-6 mb-6 border-4 border-green-400">
      <div class="flex items-center gap-3 mb-4">
        <div class="bg-green-500 text-white rounded-full w-12 h-12 flex items-center justify-center text-xl font-bold">2</div>
        <div>
          <h3 class="text-2xl font-bold text-green-700">Phase 2: Strength & Hypertrophy</h3>
          <p class="text-sm text-gray-600">Weeks 9-16 | Building Real Muscle & Strength</p>
        </div>
      </div>

      <div class="bg-green-50 p-4 rounded-lg mb-4">
        <h4 class="font-bold text-green-800 mb-2">ğŸ¯ Primary Goals:</h4>
        <ul class="space-y-1 text-sm">
          <li>âœ“ Increase training volume (4 sets vs 3)</li>
          <li>âœ“ Build significant muscle mass</li>
          <li>âœ“ Increase strength on all major lifts</li>
          <li>âœ“ Continue pull-up progression toward first full rep</li>
          <li>âœ“ Improve body composition (more muscle, less fat)</li>
        </ul>
      </div>

      <div class="space-y-4">
        <div class="border-l-4 border-green-500 pl-4">
          <h4 class="font-bold text-gray-800">Day 1: Push</h4>
          <p class="text-sm text-gray-700 mb-2"><strong>Focus:</strong> Maximum chest, shoulder, and tricep development</p>
          <p class="text-sm text-gray-600"><strong>Why:</strong> Flat bench press now leads (more weight = more strength). Volume increased to 4 sets on main movements. This drives hypertrophy. Dips are now full movements (not assisted) - major upper body builder. This day will make you STRONG.</p>
        </div>

        <div class="border-l-4 border-blue-500 pl-4">
          <h4 class="font-bold text-gray-800">Day 2: Pull</h4>
          <p class="text-sm text-gray-700 mb-2"><strong>Focus:</strong> Back thickness, width, and pull-up progression</p>
          <p class="text-sm text-gray-600"><strong>Why:</strong> Negative pull-ups lead the workout (CRITICAL for your goal). Volume increased to drive growth. Single-arm rows fix imbalances. Pullovers expand rib cage and lats. By Week 12-14, you may get your first full pull-up!</p>
        </div>

        <div class="border-l-4 border-orange-500 pl-4">
          <h4 class="font-bold text-gray-800">Day 3: Legs & Core</h4>
          <p class="text-sm text-gray-700 mb-2"><strong>Focus:</strong> Maximum leg development and core strength</p>
          <p class="text-sm text-gray-600"><strong>Why:</strong> Volume increased on squats and RDLs. Bulgarian split squats are incredibly effective for glute and quad development. Hanging knee raises start building the ab strength you need for a visible six-pack. Russian twists hit obliques.</p>
        </div>

        <div class="border-l-4 border-purple-500 pl-4">
          <h4 class="font-bold text-gray-800">Day 4: Cardio & Core</h4>
          <p class="text-sm text-gray-700 mb-2"><strong>Focus:</strong> Active recovery with additional core work</p>
          <p class="text-sm text-gray-600"><strong>Why:</strong> Lighter day between heavy sessions. Maintains cardiovascular fitness while allowing recovery.</p>
        </div>

        <div class="border-l-4 border-teal-500 pl-4">
          <h4 class="font-bold text-gray-800">Day 5: Full Body Power</h4>
          <p class="text-sm text-gray-700 mb-2"><strong>Focus:</strong> Explosive movements and skill practice</p>
          <p class="text-sm text-gray-600"><strong>Why:</strong> Clean & press builds total body power. Front squats add quad emphasis. Pull-up PRACTICE - dedicated time to work the skill. This day ties everything together and builds functional, athletic strength.</p>
        </div>

        <div class="border-l-4 border-purple-500 pl-4">
          <h4 class="font-bold text-gray-800">Day 6: Steady Cardio</h4>
          <p class="text-sm text-gray-700 mb-2"><strong>Focus:</strong> Longer duration, moderate intensity cardio</p>
          <p class="text-sm text-gray-600"><strong>Why:</strong> Builds aerobic base, aids recovery, burns calories.</p>
        </div>

        <div class="border-l-4 border-gray-500 pl-4">
          <h4 class="font-bold text-gray-800">Day 7: REST</h4>
          <p class="text-sm text-gray-700 mb-2"><strong>Focus:</strong> Complete recovery</p>
          <p class="text-sm text-gray-600"><strong>Why:</strong> One full rest day after five hard training days. Your body needs this!</p>
        </div>
      </div>

      <div class="bg-yellow-50 border-2 border-yellow-400 p-4 rounded-lg mt-4">
        <p class="font-bold text-yellow-800 mb-2">ğŸ”‘ Phase 2 Success Strategy:</p>
        <p class="text-sm text-gray-700">Progressive overload is KEY - add weight or reps each week when possible. Track everything! This is where real muscle is built. You should see visible changes in your physique. Around Week 12, attempt your first full pull-up - even if you don't get it, you'll be close!</p>
      </div>
    </div>

    <!-- PHASE 3 -->
    <div class="bg-white rounded-lg p-6 mb-6 border-4 border-purple-400">
      <div class="flex items-center gap-3 mb-4">
        <div class="bg-purple-500 text-white rounded-full w-12 h-12 flex items-center justify-center text-xl font-bold">3</div>
        <div>
          <h3 class="text-2xl font-bold text-purple-700">Phase 3: Peak Performance</h3>
          <p class="text-sm text-gray-600">Weeks 17-24 | Maximum Results & Goal Achievement</p>
        </div>
      </div>

      <div class="bg-purple-50 p-4 rounded-lg mb-4">
        <h4 class="font-bold text-purple-800 mb-2">ğŸ¯ Primary Goals:</h4>
        <ul class="space-y-1 text-sm">
          <li>âœ“ Achieve multiple strict pull-ups (GOAL: 5+)</li>
          <li>âœ“ Reveal six-pack abs with defined obliques</li>
          <li>âœ“ Peak strength on all major lifts</li>
          <li>âœ“ Maximum muscle definition and separation</li>
          <li>âœ“ Complete your transformation - become the strongest, leanest version of yourself</li>
        </ul>
      </div>

      <div class="space-y-4">
        <div class="border-l-4 border-red-500 pl-4">
          <h4 class="font-bold text-gray-800">Day 1: Heavy Push</h4>
          <p class="text-sm text-gray-700 mb-2"><strong>Focus:</strong> Maximum pressing strength</p>
          <p class="text-sm text-gray-600"><strong>Why:</strong> Lower reps (5-8), heavier weights, maximum sets (5 on bench). This is STRENGTH training. Military press builds shoulder power. Weighted dips if you can. This day makes you POWERFUL. Every set should feel challenging but achievable.</p>
        </div>

        <div class="border-l-4 border-blue-500 pl-4">
          <h4 class="font-bold text-gray-800">Day 2: Heavy Pull - PULL-UP EMPHASIS</h4>
          <p class="text-sm text-gray-700 mb-2"><strong>Focus:</strong> PULL-UP MASTERY + back strength</p>
          <p class="text-sm text-gray-600"><strong>Why:</strong> STRICT PULL-UPS lead the workout with 5 sets. This is YOUR GOAL EXERCISE! By Week 20+, you should hit sets of 5+ pull-ups. Heavy rows build thickness. Shrugs develop traps. Curls for arm development. THIS IS WHERE YOU ACHIEVE YOUR PULL-UP GOAL!</p>
        </div>

        <div class="border-l-4 border-green-500 pl-4">
          <h4 class="font-bold text-gray-800">Day 3: Legs & Abs - SIX-PACK FOCUS</h4>
          <p class="text-sm text-gray-700 mb-2"><strong>Focus:</strong> Leg strength + MAXIMUM ab development</p>
          <p class="text-sm text-gray-600"><strong>Why:</strong> Front squats, RDLs, lunges keep legs strong. Then FOUR ab exercises: hanging leg raises (lower abs), woodchoppers (obliques), weighted decline sit-ups (upper abs), plank variations (deep core). This is what reveals the six-pack!</p>
        </div>

        <div class="border-l-4 border-orange-500 pl-4">
          <h4 class="font-bold text-gray-800">Day 4: HIIT & Core</h4>
          <p class="text-sm text-gray-700 mb-2"><strong>Focus:</strong> High-intensity intervals + core</p>
          <p class="text-sm text-gray-600"><strong>Why:</strong> HIIT burns fat while preserving muscle - perfect for revealing your abs. Short bursts of intense work followed by rest. This accelerates fat loss in the final weeks.</p>
        </div>

        <div class="border-l-4 border-indigo-500 pl-4">
          <h4 class="font-bold text-gray-800">Day 5: Upper Volume</h4>
          <p class="text-sm text-gray-700 mb-2"><strong>Focus:</strong> High-volume pump work for definition</p>
          <p class="text-sm text-gray-600"><strong>Why:</strong> Push-ups to failure, pullovers, shoulder circuits, dips, face pulls, curl 21s, high-rep triceps. This creates the muscle pumps that enhance definition. You'll look and feel incredible after this workout.</p>
        </div>

        <div class="border-l-4 border-teal-500 pl-4">
          <h4 class="font-bold text-gray-800">Day 6: Steady Cardio</h4>
          <p class="text-sm text-gray-700 mb-2"><strong>Focus:</strong> Final fat-burning cardio</p>
          <p class="text-sm text-gray-600"><strong>Why:</strong> Steady state cardio for consistent calorie burn and recovery. The final push to reveal everything you've built.</p>
        </div>

        <div class="border-l-4 border-green-400 pl-4">
          <h4 class="font-bold text-gray-800">Day 7: Active Recovery</h4>
          <p class="text-sm text-gray-700 mb-2"><strong>Focus:</strong> Light movement and recovery</p>
          <p class="text-sm text-gray-600"><strong>Why:</strong> Yoga, walking, stretching. Keep blood flowing but allow full recovery for the next week's assault.</p>
        </div>
      </div>

      <div class="bg-yellow-50 border-2 border-yellow-400 p-4 rounded-lg mt-4">
        <p class="font-bold text-yellow-800 mb-2">ğŸ”‘ Phase 3 Success Strategy:</p>
        <p class="text-sm text-gray-700">This is where everything comes together! Push hard on pull-ups - you WILL get them. Ab work is intense - embrace the burn. Nutrition is critical now - abs are revealed in the kitchen. By Week 24, you'll be doing multiple sets of pull-ups and showing off that six-pack. FINISH STRONG!</p>
      </div>
    </div>

    <!-- PROGRAM PRINCIPLES -->
    <div class="bg-gradient-to-r from-pink-500 to-purple-600 text-white rounded-lg p-6 mb-6">
      <h3 class="text-2xl font-bold mb-4">ğŸ§¬ Why This Program Works</h3>
      
      <div class="space-y-3 text-sm">
        <div class="bg-white bg-opacity-20 p-3 rounded">
          <p class="font-bold mb-1">Progressive Overload</p>
          <p>Volume and intensity increase across phases. Your body must adapt by getting stronger and building muscle.</p>
        </div>
        
        <div class="bg-white bg-opacity-20 p-3 rounded">
          <p class="font-bold mb-1">Periodization</p>
          <p>Phases target different adaptations: foundation â†’ hypertrophy â†’ strength. This prevents plateaus and optimizes progress.</p>
        </div>
        
        <div class="bg-white bg-opacity-20 p-3 rounded">
          <p class="font-bold mb-1">Frequency & Recovery</p>
          <p>Each muscle group trained 2x/week for optimal growth while allowing adequate recovery. With your medical conditions, this balance is crucial.</p>
        </div>
        
        <div class="bg-white bg-opacity-20 p-3 rounded">
          <p class="font-bold mb-1">Specificity</p>
          <p>Want pull-ups? We train pull-ups (negatives â†’ assisted â†’ strict). Want abs? We do progressive ab work. You get what you train for.</p>
        </div>
        
        <div class="bg-white bg-opacity-20 p-3 rounded">
          <p class="font-bold mb-1">Compound Movements First</p>
          <p>Big movements (squats, presses, rows, pull-ups) build the most muscle and strength. Isolation work refines and targets specific areas.</p>
        </div>
      </div>
    </div>

    <!-- NUTRITION NOTE -->
    <div class="bg-blue-50 border-2 border-blue-400 rounded-lg p-6 mb-6">
      <h3 class="text-xl font-bold text-blue-800 mb-3">ğŸ½ï¸ Nutrition Considerations</h3>
      <div class="space-y-2 text-sm text-gray-700">
        <p><strong>For muscle growth:</strong> Eat in a slight caloric surplus (200-300 calories above maintenance). Prioritize protein: 0.8-1g per pound of bodyweight daily.</p>
        <p><strong>For fat loss (revealing abs):</strong> Moderate deficit (300-500 calories below maintenance) while keeping protein high to preserve muscle.</p>
        <p><strong>Phase 1-2:</strong> Focus on fueling workouts and recovery. Slight surplus works well.</p>
        <p><strong>Phase 3:</strong> If abs aren't showing by Week 20, modest calorie reduction reveals them while maintaining strength.</p>
        <p class="font-bold text-blue-800 mt-3">Remember: You can't out-train a bad diet. Abs are built in the gym, revealed in the kitchen!</p>
      </div>
    </div>

    <!-- FINAL MOTIVATION -->
    <div class="bg-gradient-to-r from-green-400 via-blue-500 to-purple-600 text-white rounded-lg p-8 text-center">
      <h3 class="text-3xl font-bold mb-4">ğŸŒŸ YOUR TRANSFORMATION AWAITS ğŸŒŸ</h3>
      <p class="text-lg mb-4">This isn't just a workout program - it's a complete transformation system.</p>
      <p class="mb-4">Every exercise has a purpose. Every phase builds on the last. Every week brings you closer to your goals.</p>
      <div class="bg-white bg-opacity-20 p-4 rounded-lg mb-4">
        <p class="text-xl font-bold mb-2">By June 2026, you WILL:</p>
        <ul class="text-left max-w-md mx-auto space-y-2">
          <li>âœ“ Bang out multiple sets of strict pull-ups</li>
          <li>âœ“ Perform dips with confidence and strength</li>
          <li>âœ“ Rock a visible six-pack with defined obliques</li>
          <li>âœ“ Have strong, wide lats and sculpted shoulders</li>
          <li>âœ“ Feel stronger, healthier, and more confident than ever</li>
        </ul>
      </div>
      <p class="text-2xl font-bold">Trust the process. Stay consistent. YOU'VE GOT THIS, AMY! ğŸ’ªâ¤ï¸</p>
    </div>

  </div>`;
}

function render(){
  const app=document.getElementById('app');
  if(!app)return;
  if(st.v==='home')app.innerHTML=rHome();
  else if(st.v==='info')app.innerHTML=rInfo();
  else if(st.v==='stats')app.innerHTML=rStats();
  else if(st.v==='workout')app.innerHTML=rWork();
  else if(st.v==='exercises')app.innerHTML=rExercises();  // NEW
  else if(st.v==='overview')app.innerHTML=rOverview();    // NEW
}

window.chView=chView;
window.viewExChart=viewExChart;
window.updInfo=updInfo;
window.updW=updW;
window.updEx=updEx;
window.updMeas=updMeas;
window.photo=photo;
window.prev=prev;
window.next=next;
window.render=render;
window.st=st;

render();
</script>
</body>
</html>
